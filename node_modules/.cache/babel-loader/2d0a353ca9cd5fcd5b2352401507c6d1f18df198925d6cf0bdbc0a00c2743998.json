{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u0418\\u0432\\u0430\\u043D\\\\Desktop\\\\signal-analyzer\\\\src\\\\ChartComponent.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useCallback, useState, useMemo } from \"react\";\nimport { Chart, registerables } from \"chart.js\";\nimport zoomPlugin from \"chartjs-plugin-zoom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst intersectionMarkerPlugin = {\n  id: \"intersectionMarker\",\n  afterDatasetsDraw(chart) {\n    const {\n      ctx\n    } = chart;\n    chart.data.datasets.forEach((dataset, datasetIndex) => {\n      if (!(dataset !== null && dataset !== void 0 && dataset.intersectionMarker)) return;\n      const meta = chart.getDatasetMeta(datasetIndex);\n      if (!chart.isDatasetVisible(datasetIndex)) return;\n      meta.data.forEach(element => {\n        var _dataset$markerSize, _dataset$markerColor, _dataset$markerAlpha, _dataset$markerLineWi;\n        const x = element.x;\n        const y = element.y;\n        if (x === undefined || y === undefined || isNaN(x) || isNaN(y)) return;\n        const size = (_dataset$markerSize = dataset.markerSize) !== null && _dataset$markerSize !== void 0 ? _dataset$markerSize : 6;\n        ctx.save();\n        ctx.strokeStyle = (_dataset$markerColor = dataset.markerColor) !== null && _dataset$markerColor !== void 0 ? _dataset$markerColor : \"#000000\";\n        ctx.globalAlpha = (_dataset$markerAlpha = dataset.markerAlpha) !== null && _dataset$markerAlpha !== void 0 ? _dataset$markerAlpha : 0.8;\n        ctx.lineWidth = (_dataset$markerLineWi = dataset.markerLineWidth) !== null && _dataset$markerLineWi !== void 0 ? _dataset$markerLineWi : 2;\n        ctx.lineCap = \"round\";\n        ctx.beginPath();\n        ctx.moveTo(x - size, y - size);\n        ctx.lineTo(x + size, y + size);\n        ctx.moveTo(x - size, y + size);\n        ctx.lineTo(x + size, y - size);\n        ctx.stroke();\n        ctx.restore();\n      });\n    });\n  }\n};\nChart.register(...registerables, zoomPlugin, intersectionMarkerPlugin);\nconst ZOOM_STEP = 1.25;\n\n// Универсальный алгоритм обработки сигналов\nconst createSignalProcessor = () => {\n  const detectPeaks = (signal, options = {}) => {\n    const {\n      minPeakDistance = 100,\n      minPeakHeight = 0.1,\n      minPeakWidth = 10,\n      maxPeakWidth = 1000,\n      doubleSided = true\n    } = options;\n    const peaks = [];\n    const n = signal.length;\n    for (let i = 1; i < n - 1; i++) {\n      const isPeak = doubleSided ? signal[i] > signal[i - 1] && signal[i] > signal[i + 1] || signal[i] < signal[i - 1] && signal[i] < signal[i + 1] : signal[i] > signal[i - 1] && signal[i] > signal[i + 1];\n      if (isPeak && Math.abs(signal[i]) >= minPeakHeight) {\n        // Проверка расстояния до предыдущего пика\n        if (peaks.length > 0 && i - peaks[peaks.length - 1].index < minPeakDistance) {\n          continue;\n        }\n\n        // Упрощенная проверка ширины пика\n        let width = 1;\n        let left = i - 1;\n        let right = i + 1;\n        while (left >= 0 && signal[left] <= signal[i] * 0.8) {\n          width++;\n          left--;\n        }\n        while (right < n && signal[right] <= signal[i] * 0.8) {\n          width++;\n          right++;\n        }\n        if (width >= minPeakWidth && width <= maxPeakWidth) {\n          peaks.push({\n            index: i,\n            value: signal[i],\n            width: width\n          });\n        }\n      }\n    }\n    return peaks;\n  };\n  const findZeroCrossings = (t, signal1, signal2, options = {}) => {\n    const {\n      threshold = 0.02,\n      minDistance = 100e-9,\n      maxIterations = 10\n    } = options;\n    const intersections = [];\n    const n = Math.min(t.length, signal1.length, signal2.length);\n\n    // Находим пересечения сигналов\n    for (let i = 1; i < n; i++) {\n      const diffPrev = signal1[i - 1] - signal2[i - 1];\n      const diffCurr = signal1[i] - signal2[i];\n\n      // Проверяем пересечение нуля разности сигналов\n      if (diffPrev <= 0 && diffCurr > 0 || diffPrev >= 0 && diffCurr < 0) {\n        const t1 = t[i - 1];\n        const t2 = t[i];\n        const diffDelta = diffCurr - diffPrev;\n        if (Math.abs(diffDelta) < 1e-10) continue;\n        const ratio = -diffPrev / diffDelta;\n        const time = t1 + ratio * (t2 - t1);\n        const value1 = signal1[i - 1] + ratio * (signal1[i] - signal1[i - 1]);\n        const value2 = signal2[i - 1] + ratio * (signal2[i] - signal2[i - 1]);\n        const avgValue = (value1 + value2) / 2;\n        if (Math.abs(avgValue) <= threshold) {\n          intersections.push({\n            time,\n            value: avgValue,\n            index: i\n          });\n        }\n      }\n    }\n\n    // Фильтрация близких пересечений\n    let filteredIntersections = [...intersections];\n    let iteration = 0;\n    while (iteration < maxIterations) {\n      let changed = false;\n      for (let i = filteredIntersections.length - 1; i > 0; i--) {\n        const timeDiff = filteredIntersections[i].time - filteredIntersections[i - 1].time;\n        if (timeDiff < minDistance) {\n          // Удаляем пересечение с меньшей амплитудой\n          if (Math.abs(filteredIntersections[i].value) > Math.abs(filteredIntersections[i - 1].value)) {\n            filteredIntersections.splice(i - 1, 1);\n          } else {\n            filteredIntersections.splice(i, 1);\n          }\n          changed = true;\n          break;\n        }\n      }\n      if (!changed) break;\n      iteration++;\n    }\n    return filteredIntersections;\n  };\n  const calculateDerivative = (t, u) => {\n    const derivatives = [0]; // Первое значение\n\n    for (let i = 1; i < u.length; i++) {\n      const du = u[i] - u[i - 1];\n      const dt = t[i] - t[i - 1];\n      if (dt > 0) {\n        derivatives.push(du / dt);\n      } else {\n        derivatives.push(0);\n      }\n    }\n    return derivatives;\n  };\n  const calculateCumulative = (t, values, initialValue = 0) => {\n    const cumulative = [initialValue];\n    for (let i = 1; i < values.length; i++) {\n      cumulative.push(cumulative[i - 1] + values[i]);\n    }\n    return cumulative;\n  };\n  const processSignals = (rawData, processingParams = {}) => {\n    const {\n      tenzScale = 0.00132 * 1.25,\n      interfOffset = 0.04,\n      timeCorrection = 51.5e-6,\n      tenzTransformScale = 5000,\n      tenzTransformOffset = 0.38,\n      materialProperties = {\n        youngModulus: 71e9,\n        density: 2770\n      }\n    } = processingParams;\n    const {\n      t: time,\n      tenz: rawTenz,\n      interf: rawInterf\n    } = rawData;\n\n    // Предобработка сигналов\n    const tenz = rawTenz.map(val => val * tenzScale);\n    const interf = rawInterf.map(val => val + interfOffset);\n\n    // Находим пересечения сигналов\n    const intersections = findZeroCrossings(time, tenz, interf, {\n      threshold: 0.02,\n      minDistance: 100e-9\n    });\n\n    // Вычисляем производную и интеграл для интерферосигнала\n    const intersectionTimes = intersections.map(p => p.time);\n    const intersectionValues = intersections.map(p => p.value);\n    const derivatives = calculateDerivative(intersectionTimes, intersectionValues);\n    const cumulative = calculateCumulative(intersectionTimes, derivatives, 0.63 / 4 * 1e-6);\n\n    // Обработанные сигналы\n    const correctedTenz = tenz.map(val => -val * tenzTransformScale + tenzTransformOffset);\n    const correctedTime = time.map(val => val + 50e-6);\n\n    // Выходные данные для сохранения\n    const outputData = [];\n    const startIdx = Math.floor(time.length * 0.1); // Начинаем с 10% данных\n    const endIdx = Math.floor(time.length * 0.7); // До 70% данных\n\n    for (let i = startIdx; i < endIdx; i += 10) {\n      outputData.push({\n        time: time[i] - time[startIdx],\n        stress: -(-tenz[i] * tenzTransformScale + tenzTransformOffset) * Math.sqrt(materialProperties.youngModulus * materialProperties.density)\n      });\n    }\n    return {\n      originalSignals: {\n        tenz,\n        interf,\n        time\n      },\n      intersections,\n      derivatives: {\n        time: intersectionTimes.map(t => t - timeCorrection),\n        values: derivatives\n      },\n      cumulative: {\n        time: intersectionTimes.map(t => t - timeCorrection),\n        values: cumulative\n      },\n      processedSignals: {\n        time: correctedTime,\n        tenz: correctedTenz\n      },\n      outputData\n    };\n  };\n  return {\n    detectPeaks,\n    findZeroCrossings,\n    calculateDerivative,\n    calculateCumulative,\n    processSignals\n  };\n};\nconst ChartComponent = ({\n  data,\n  processingParams = {}\n}) => {\n  _s();\n  const originalChartRef = useRef(null);\n  const processedChartRef = useRef(null);\n  const originalChartInstance = useRef(null);\n  const processedChartInstance = useRef(null);\n  const [originalAxisVisibility, setOriginalAxisVisibility] = useState({});\n  const [processedAxisVisibility, setProcessedAxisVisibility] = useState({});\n  const [intersectionVisibility, setIntersectionVisibility] = useState(true);\n  const [tenzOffset, setTenzOffset] = useState(0);\n  const [currentIntersections, setCurrentIntersections] = useState([]);\n  const [processedData, setProcessedData] = useState(null);\n\n  // Инициализация процессора сигналов\n  const signalProcessor = useMemo(() => createSignalProcessor(), []);\n\n  // Обработка данных при их изменении\n  useEffect(() => {\n    if (!(data !== null && data !== void 0 && data.rawData)) return;\n    try {\n      const result = signalProcessor.processSignals(data.rawData, processingParams);\n      setProcessedData(result);\n      setCurrentIntersections(result.intersections);\n    } catch (error) {\n      console.error(\"Ошибка обработки сигналов:\", error);\n    }\n  }, [data, processingParams, signalProcessor]);\n  const formatTime = value => {\n    if (typeof value !== \"number\") return \"-\";\n    return value.toExponential(3);\n  };\n  const formatSignal = value => {\n    if (typeof value !== \"number\") return \"-\";\n    return value.toFixed(5);\n  };\n\n  // Подготовка данных для графиков\n  const chartData = useMemo(() => {\n    if (!processedData || !(data !== null && data !== void 0 && data.rawData)) return null;\n    const {\n      t: time\n    } = data.rawData;\n    const {\n      originalSignals,\n      intersections,\n      derivatives,\n      cumulative,\n      processedSignals\n    } = processedData;\n\n    // Применяем сдвиг к тензосигналу\n    const shiftedTenz = originalSignals.tenz.map(val => val + tenzOffset);\n    return {\n      original: [{\n        label: \"Тензометрический сигнал (CH1)\",\n        data: time.map((t, i) => ({\n          x: t,\n          y: shiftedTenz[i]\n        })),\n        borderColor: \"blue\",\n        backgroundColor: \"rgba(0, 0, 255, 0.1)\",\n        tension: 0.1,\n        pointRadius: 0\n      }, {\n        label: \"Интерферометрический сигнал (CH2)\",\n        data: time.map((t, i) => ({\n          x: t,\n          y: originalSignals.interf[i]\n        })),\n        borderColor: \"red\",\n        backgroundColor: \"rgba(255, 0, 0, 0.1)\",\n        tension: 0.1,\n        pointRadius: 0\n      }, {\n        label: `Пересечения (${intersections.length} точек)`,\n        data: intersections.map(p => ({\n          x: p.time,\n          y: p.value\n        })),\n        borderColor: \"black\",\n        backgroundColor: \"rgba(0, 0, 0, 0.8)\",\n        pointRadius: 4,\n        showLine: false,\n        intersectionMarker: true,\n        markerSize: 6,\n        markerColor: \"#000000\"\n      }],\n      processed: [{\n        label: \"Производная интерферосигнала\",\n        data: derivatives.time.map((t, i) => ({\n          x: t,\n          y: derivatives.values[i]\n        })),\n        borderColor: \"green\",\n        backgroundColor: \"rgba(0, 255, 0, 0.1)\",\n        tension: 0.1,\n        pointRadius: 0\n      }, {\n        label: \"Скорректированный тензосигнал\",\n        data: processedSignals.time.map((t, i) => ({\n          x: t,\n          y: -shiftedTenz[i] * 5000 + 0.38\n        })),\n        borderColor: \"purple\",\n        backgroundColor: \"rgba(128, 0, 128, 0.1)\",\n        tension: 0.1,\n        pointRadius: 0\n      }, {\n        label: \"Интеграл интерферосигнала\",\n        data: cumulative.time.map((t, i) => ({\n          x: t,\n          y: cumulative.values[i]\n        })),\n        borderColor: \"orange\",\n        backgroundColor: \"rgba(255, 165, 0, 0.1)\",\n        tension: 0.1,\n        pointRadius: 0\n      }],\n      intersections\n    };\n  }, [processedData, data === null || data === void 0 ? void 0 : data.rawData, tenzOffset]);\n\n  // Инициализация и обновление графиков\n  useEffect(() => {\n    if (!chartData) return;\n    const buildOptions = (title, yLabel) => ({\n      responsive: true,\n      interaction: {\n        mode: \"index\",\n        intersect: false\n      },\n      scales: {\n        x: {\n          type: \"linear\",\n          title: {\n            display: true,\n            text: \"Время (секунды)\"\n          }\n        },\n        y: {\n          type: \"linear\",\n          title: {\n            display: true,\n            text: yLabel\n          }\n        }\n      },\n      plugins: {\n        title: {\n          display: true,\n          text: title\n        },\n        legend: {\n          display: true\n        },\n        zoom: {\n          pan: {\n            enabled: true,\n            mode: \"xy\"\n          },\n          zoom: {\n            wheel: {\n              enabled: true,\n              modifierKey: \"ctrl\"\n            },\n            pinch: {\n              enabled: true\n            },\n            drag: {\n              enabled: false\n            },\n            mode: \"xy\"\n          }\n        }\n      }\n    });\n\n    // Уничтожаем старые графики\n    if (originalChartInstance.current) {\n      originalChartInstance.current.destroy();\n    }\n    if (processedChartInstance.current) {\n      processedChartInstance.current.destroy();\n    }\n\n    // Создаем новые графики\n    if (originalChartRef.current) {\n      const ctx = originalChartRef.current.getContext(\"2d\");\n      originalChartInstance.current = new Chart(ctx, {\n        type: \"line\",\n        data: {\n          datasets: chartData.original\n        },\n        options: buildOptions(\"Исходные сигналы с пересечениями\", \"Сигнал (В)\")\n      });\n    }\n    if (processedChartRef.current) {\n      const ctx = processedChartRef.current.getContext(\"2d\");\n      processedChartInstance.current = new Chart(ctx, {\n        type: \"line\",\n        data: {\n          datasets: chartData.processed\n        },\n        options: buildOptions(\"Обработанные сигналы\", \"Сигнал\")\n      });\n    }\n    return () => {\n      var _originalChartInstanc, _processedChartInstan;\n      (_originalChartInstanc = originalChartInstance.current) === null || _originalChartInstanc === void 0 ? void 0 : _originalChartInstanc.destroy();\n      (_processedChartInstan = processedChartInstance.current) === null || _processedChartInstan === void 0 ? void 0 : _processedChartInstan.destroy();\n    };\n  }, [chartData]);\n\n  // Инициализация видимости осей\n  useEffect(() => {\n    if (chartData !== null && chartData !== void 0 && chartData.original) {\n      const visibilityMap = {};\n      chartData.original.forEach(dataset => {\n        visibilityMap[dataset.label] = true;\n      });\n      setOriginalAxisVisibility(visibilityMap);\n    }\n    if (chartData !== null && chartData !== void 0 && chartData.processed) {\n      const visibilityMap = {};\n      chartData.processed.forEach(dataset => {\n        visibilityMap[dataset.label] = true;\n      });\n      setProcessedAxisVisibility(visibilityMap);\n    }\n  }, [chartData]);\n  const handleResetOriginal = useCallback(() => {\n    var _originalChartInstanc2;\n    (_originalChartInstanc2 = originalChartInstance.current) === null || _originalChartInstanc2 === void 0 ? void 0 : _originalChartInstanc2.resetZoom();\n  }, []);\n  const handleResetProcessed = useCallback(() => {\n    var _processedChartInstan2;\n    (_processedChartInstan2 = processedChartInstance.current) === null || _processedChartInstan2 === void 0 ? void 0 : _processedChartInstan2.resetZoom();\n  }, []);\n  const zoomChart = useCallback((chartRef, factor) => {\n    var _chartRef$current;\n    (_chartRef$current = chartRef.current) === null || _chartRef$current === void 0 ? void 0 : _chartRef$current.zoom({\n      x: factor,\n      y: factor\n    });\n  }, []);\n  const handleZoomOriginalIn = useCallback(() => {\n    zoomChart(originalChartInstance, ZOOM_STEP);\n  }, [zoomChart]);\n  const handleZoomOriginalOut = useCallback(() => {\n    zoomChart(originalChartInstance, 1 / ZOOM_STEP);\n  }, [zoomChart]);\n  const handleZoomProcessedIn = useCallback(() => {\n    zoomChart(processedChartInstance, ZOOM_STEP);\n  }, [zoomChart]);\n  const handleZoomProcessedOut = useCallback(() => {\n    zoomChart(processedChartInstance, 1 / ZOOM_STEP);\n  }, [zoomChart]);\n  const handleAxisToggle = useCallback((chartInstanceRef, label, visibilityState, setVisibilityState) => {\n    var _visibilityState$labe;\n    const current = (_visibilityState$labe = visibilityState[label]) !== null && _visibilityState$labe !== void 0 ? _visibilityState$labe : true;\n    const next = !current;\n    setVisibilityState(prev => ({\n      ...prev,\n      [label]: next\n    }));\n    const chart = chartInstanceRef.current;\n    if (!chart) return;\n    const datasetIndex = chart.data.datasets.findIndex(dataset => dataset.label === label);\n    if (datasetIndex === -1) return;\n    chart.setDatasetVisibility(datasetIndex, next);\n    chart.update(\"none\");\n  }, []);\n  const handleIntersectionToggle = useCallback(() => {\n    const next = !intersectionVisibility;\n    setIntersectionVisibility(next);\n    const chart = originalChartInstance.current;\n    if (!chart) return;\n    const datasetIndex = chart.data.datasets.findIndex(dataset => dataset.intersectionMarker);\n    if (datasetIndex === -1) return;\n    chart.setDatasetVisibility(datasetIndex, next);\n    chart.update(\"none\");\n  }, [intersectionVisibility]);\n  const originalAxisOptions = useMemo(() => {\n    var _chartData$original;\n    return ((_chartData$original = chartData === null || chartData === void 0 ? void 0 : chartData.original) !== null && _chartData$original !== void 0 ? _chartData$original : []).filter(dataset => !dataset.intersectionMarker).map(dataset => ({\n      label: dataset.label,\n      color: dataset.borderColor\n    }));\n  }, [chartData]);\n  const processedAxisOptions = useMemo(() => {\n    var _chartData$processed;\n    return ((_chartData$processed = chartData === null || chartData === void 0 ? void 0 : chartData.processed) !== null && _chartData$processed !== void 0 ? _chartData$processed : []).map(dataset => ({\n      label: dataset.label,\n      color: dataset.borderColor\n    }));\n  }, [chartData]);\n  const offsetRange = useMemo(() => {\n    var _data$rawData;\n    if (!(data !== null && data !== void 0 && (_data$rawData = data.rawData) !== null && _data$rawData !== void 0 && _data$rawData.tenz)) {\n      return {\n        min: -1,\n        max: 1,\n        step: 0.001\n      };\n    }\n    const values = data.rawData.tenz;\n    const range = Math.max(...values) - Math.min(...values);\n    return {\n      min: -range,\n      max: range,\n      step: range / 1000\n    };\n  }, [data === null || data === void 0 ? void 0 : data.rawData]);\n  const averageY = useMemo(() => {\n    if (currentIntersections.length === 0) return 0;\n    const sum = currentIntersections.reduce((acc, point) => acc + point.value, 0);\n    return sum / currentIntersections.length;\n  }, [currentIntersections]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"charts-wrapper\",\n    children: [(data === null || data === void 0 ? void 0 : data.rawData) && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tenz-offset-control\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"tenz-offset-input\",\n        className: \"tenz-offset-label\",\n        children: \"\\u0421\\u0434\\u0432\\u0438\\u0433 \\u0442\\u0435\\u043D\\u0437\\u043E\\u043C\\u0435\\u0442\\u0440\\u0438\\u0447\\u0435\\u0441\\u043A\\u043E\\u0433\\u043E \\u0441\\u0438\\u0433\\u043D\\u0430\\u043B\\u0430 (CH1) \\u043F\\u043E \\u043E\\u0441\\u0438 Y:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 608,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tenz-offset-input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"tenz-offset-input\",\n          type: \"range\",\n          min: offsetRange.min,\n          max: offsetRange.max,\n          step: offsetRange.step,\n          value: tenzOffset,\n          onChange: e => setTenzOffset(parseFloat(e.target.value)),\n          className: \"tenz-offset-slider\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 612,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          min: offsetRange.min,\n          max: offsetRange.max,\n          step: offsetRange.step,\n          value: tenzOffset,\n          onChange: e => setTenzOffset(parseFloat(e.target.value) || 0),\n          className: \"tenz-offset-number\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 622,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"tenz-offset-reset-btn\",\n          onClick: () => setTenzOffset(0),\n          \"aria-label\": \"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C \\u0441\\u0434\\u0432\\u0438\\u0433\",\n          children: \"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 633,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 611,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 607,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"chart-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chart-controls-group\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"zoom-controls\",\n          role: \"group\",\n          \"aria-label\": \"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043C\\u0430\\u0441\\u0448\\u0442\\u0430\\u0431\\u043E\\u043C\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"zoom-control-btn\",\n            onClick: handleZoomOriginalOut,\n            \"aria-label\": \"\\u0423\\u043C\\u0435\\u043D\\u044C\\u0448\\u0438\\u0442\\u044C \\u043C\\u0430\\u0441\\u0448\\u0442\\u0430\\u0431\",\n            children: \"-\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 648,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"zoom-control-btn\",\n            onClick: handleZoomOriginalIn,\n            \"aria-label\": \"\\u0423\\u0432\\u0435\\u043B\\u0438\\u0447\\u0438\\u0442\\u044C \\u043C\\u0430\\u0441\\u0448\\u0442\\u0430\\u0431\",\n            children: \"+\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 656,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"zoom-reset-btn\",\n            onClick: handleResetOriginal,\n            \"aria-label\": \"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C \\u043C\\u0430\\u0441\\u0448\\u0442\\u0430\\u0431\",\n            children: \"\\u21BA \\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 664,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 647,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 646,\n        columnNumber: 9\n      }, this), originalAxisOptions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"axis-toggle-group\",\n        role: \"group\",\n        \"aria-label\": \"\\u041E\\u0442\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435 \\u043E\\u0441\\u0435\\u0439 \\u0438\\u0441\\u0445\\u043E\\u0434\\u043D\\u044B\\u0445 \\u0441\\u0438\\u0433\\u043D\\u0430\\u043B\\u043E\\u0432\",\n        children: [originalAxisOptions.map(({\n          label,\n          color\n        }) => {\n          var _originalAxisVisibili;\n          const isActive = (_originalAxisVisibili = originalAxisVisibility[label]) !== null && _originalAxisVisibili !== void 0 ? _originalAxisVisibili : true;\n          return /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: `axis-toggle-btn ${isActive ? \"axis-toggle-btn--active\" : \"\"}`,\n            onClick: () => handleAxisToggle(originalChartInstance, label, originalAxisVisibility, setOriginalAxisVisibility),\n            \"aria-pressed\": isActive,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"axis-toggle-btn__indicator\",\n              style: {\n                borderColor: color,\n                backgroundColor: isActive ? color : \"transparent\"\n              },\n              \"aria-hidden\": \"true\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 694,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"axis-toggle-btn__label\",\n              children: label\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 702,\n              columnNumber: 19\n            }, this)]\n          }, label, true, {\n            fileName: _jsxFileName,\n            lineNumber: 680,\n            columnNumber: 17\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: `axis-toggle-btn ${intersectionVisibility ? \"axis-toggle-btn--active\" : \"\"}`,\n          onClick: handleIntersectionToggle,\n          \"aria-pressed\": intersectionVisibility,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"axis-toggle-btn__indicator\",\n            style: {\n              borderColor: \"#000000\",\n              backgroundColor: intersectionVisibility ? \"#000000\" : \"transparent\"\n            },\n            \"aria-hidden\": \"true\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 712,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"axis-toggle-btn__label\",\n            children: \"\\u041F\\u0435\\u0440\\u0435\\u0441\\u0435\\u0447\\u0435\\u043D\\u0438\\u044F \\u0441\\u0438\\u0433\\u043D\\u0430\\u043B\\u043E\\u0432\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 720,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 706,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 676,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: originalChartRef,\n        width: \"800\",\n        height: \"400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 726,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 645,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"chart-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chart-controls-group\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"zoom-controls\",\n          role: \"group\",\n          \"aria-label\": \"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043C\\u0430\\u0441\\u0448\\u0442\\u0430\\u0431\\u043E\\u043C\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"zoom-control-btn\",\n            onClick: handleZoomProcessedOut,\n            \"aria-label\": \"\\u0423\\u043C\\u0435\\u043D\\u044C\\u0448\\u0438\\u0442\\u044C \\u043C\\u0430\\u0441\\u0448\\u0442\\u0430\\u0431\",\n            children: \"-\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 732,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"zoom-control-btn\",\n            onClick: handleZoomProcessedIn,\n            \"aria-label\": \"\\u0423\\u0432\\u0435\\u043B\\u0438\\u0447\\u0438\\u0442\\u044C \\u043C\\u0430\\u0441\\u0448\\u0442\\u0430\\u0431\",\n            children: \"+\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 740,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"zoom-reset-btn\",\n            onClick: handleResetProcessed,\n            \"aria-label\": \"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C \\u043C\\u0430\\u0441\\u0448\\u0442\\u0430\\u0431\",\n            children: \"\\u21BA \\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 748,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 731,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 730,\n        columnNumber: 9\n      }, this), processedAxisOptions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"axis-toggle-group\",\n        role: \"group\",\n        \"aria-label\": \"\\u041E\\u0442\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435 \\u043E\\u0441\\u0435\\u0439 \\u043E\\u0431\\u0440\\u0430\\u0431\\u043E\\u0442\\u0430\\u043D\\u043D\\u044B\\u0445 \\u0441\\u0438\\u0433\\u043D\\u0430\\u043B\\u043E\\u0432\",\n        children: processedAxisOptions.map(({\n          label,\n          color\n        }) => {\n          var _processedAxisVisibil;\n          const isActive = (_processedAxisVisibil = processedAxisVisibility[label]) !== null && _processedAxisVisibil !== void 0 ? _processedAxisVisibil : true;\n          return /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: `axis-toggle-btn ${isActive ? \"axis-toggle-btn--active\" : \"\"}`,\n            onClick: () => handleAxisToggle(processedChartInstance, label, processedAxisVisibility, setProcessedAxisVisibility),\n            \"aria-pressed\": isActive,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"axis-toggle-btn__indicator\",\n              style: {\n                borderColor: color,\n                backgroundColor: isActive ? color : \"transparent\"\n              },\n              \"aria-hidden\": \"true\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 778,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"axis-toggle-btn__label\",\n              children: label\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 786,\n              columnNumber: 19\n            }, this)]\n          }, label, true, {\n            fileName: _jsxFileName,\n            lineNumber: 764,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 760,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: processedChartRef,\n        width: \"800\",\n        height: \"400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 792,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 729,\n      columnNumber: 7\n    }, this), currentIntersections.length > 0 && /*#__PURE__*/_jsxDEV(\"aside\", {\n      className: \"intersection-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"intersection-panel__header\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"chart-chip chart-chip--highlight\",\n          children: [\"\\u041E\\u0431\\u043D\\u0430\\u0440\\u0443\\u0436\\u0435\\u043D\\u043E \", currentIntersections.length, \" \\u043F\\u0435\\u0440\\u0435\\u0441\\u0435\\u0447\\u0435\\u043D\\u0438\\u0439\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 798,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\u0421\\u0440\\u0435\\u0434\\u043D\\u0435\\u0435 \\u0437\\u043D\\u0430\\u0447\\u0435\\u043D\\u0438\\u0435 Y: \", averageY.toFixed(4)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 801,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 797,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"intersection-table-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"intersection-table\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"#\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 807,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0412\\u0440\\u0435\\u043C\\u044F (\\u0441)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 808,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0410\\u043C\\u043F\\u043B\\u0438\\u0442\\u0443\\u0434\\u0430 (\\u0412)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 809,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 806,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 805,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: currentIntersections.map((point, idx) => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: idx + 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 815,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: formatTime(point.time)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 816,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: formatSignal(point.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 817,\n                columnNumber: 21\n              }, this)]\n            }, `${point.time}-${idx}`, true, {\n              fileName: _jsxFileName,\n              lineNumber: 814,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 812,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 804,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 803,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 796,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 605,\n    columnNumber: 5\n  }, this);\n};\n_s(ChartComponent, \"lXMylL990ralMvwZ0UNag0FRkMc=\");\n_c = ChartComponent;\nexport default ChartComponent;\nvar _c;\n$RefreshReg$(_c, \"ChartComponent\");","map":{"version":3,"names":["React","useEffect","useRef","useCallback","useState","useMemo","Chart","registerables","zoomPlugin","jsxDEV","_jsxDEV","intersectionMarkerPlugin","id","afterDatasetsDraw","chart","ctx","data","datasets","forEach","dataset","datasetIndex","intersectionMarker","meta","getDatasetMeta","isDatasetVisible","element","_dataset$markerSize","_dataset$markerColor","_dataset$markerAlpha","_dataset$markerLineWi","x","y","undefined","isNaN","size","markerSize","save","strokeStyle","markerColor","globalAlpha","markerAlpha","lineWidth","markerLineWidth","lineCap","beginPath","moveTo","lineTo","stroke","restore","register","ZOOM_STEP","createSignalProcessor","detectPeaks","signal","options","minPeakDistance","minPeakHeight","minPeakWidth","maxPeakWidth","doubleSided","peaks","n","length","i","isPeak","Math","abs","index","width","left","right","push","value","findZeroCrossings","t","signal1","signal2","threshold","minDistance","maxIterations","intersections","min","diffPrev","diffCurr","t1","t2","diffDelta","ratio","time","value1","value2","avgValue","filteredIntersections","iteration","changed","timeDiff","splice","calculateDerivative","u","derivatives","du","dt","calculateCumulative","values","initialValue","cumulative","processSignals","rawData","processingParams","tenzScale","interfOffset","timeCorrection","tenzTransformScale","tenzTransformOffset","materialProperties","youngModulus","density","tenz","rawTenz","interf","rawInterf","map","val","intersectionTimes","p","intersectionValues","correctedTenz","correctedTime","outputData","startIdx","floor","endIdx","stress","sqrt","originalSignals","processedSignals","ChartComponent","_s","originalChartRef","processedChartRef","originalChartInstance","processedChartInstance","originalAxisVisibility","setOriginalAxisVisibility","processedAxisVisibility","setProcessedAxisVisibility","intersectionVisibility","setIntersectionVisibility","tenzOffset","setTenzOffset","currentIntersections","setCurrentIntersections","processedData","setProcessedData","signalProcessor","result","error","console","formatTime","toExponential","formatSignal","toFixed","chartData","shiftedTenz","original","label","borderColor","backgroundColor","tension","pointRadius","showLine","processed","buildOptions","title","yLabel","responsive","interaction","mode","intersect","scales","type","display","text","plugins","legend","zoom","pan","enabled","wheel","modifierKey","pinch","drag","current","destroy","getContext","_originalChartInstanc","_processedChartInstan","visibilityMap","handleResetOriginal","_originalChartInstanc2","resetZoom","handleResetProcessed","_processedChartInstan2","zoomChart","chartRef","factor","_chartRef$current","handleZoomOriginalIn","handleZoomOriginalOut","handleZoomProcessedIn","handleZoomProcessedOut","handleAxisToggle","chartInstanceRef","visibilityState","setVisibilityState","_visibilityState$labe","next","prev","findIndex","setDatasetVisibility","update","handleIntersectionToggle","originalAxisOptions","_chartData$original","filter","color","processedAxisOptions","_chartData$processed","offsetRange","_data$rawData","max","step","range","averageY","sum","reduce","acc","point","className","children","htmlFor","fileName","_jsxFileName","lineNumber","columnNumber","onChange","e","parseFloat","target","onClick","role","_originalAxisVisibili","isActive","style","ref","height","_processedAxisVisibil","idx","_c","$RefreshReg$"],"sources":["C:/Users/Иван/Desktop/signal-analyzer/src/ChartComponent.jsx"],"sourcesContent":["import React, { useEffect, useRef, useCallback, useState, useMemo } from \"react\";\r\nimport { Chart, registerables } from \"chart.js\";\r\nimport zoomPlugin from \"chartjs-plugin-zoom\";\r\n\r\nconst intersectionMarkerPlugin = {\r\n  id: \"intersectionMarker\",\r\n  afterDatasetsDraw(chart) {\r\n    const { ctx } = chart;\r\n    chart.data.datasets.forEach((dataset, datasetIndex) => {\r\n      if (!dataset?.intersectionMarker) return;\r\n\r\n      const meta = chart.getDatasetMeta(datasetIndex);\r\n      if (!chart.isDatasetVisible(datasetIndex)) return;\r\n\r\n      meta.data.forEach((element) => {\r\n        const x = element.x;\r\n        const y = element.y;\r\n        \r\n        if (x === undefined || y === undefined || isNaN(x) || isNaN(y)) return;\r\n        \r\n        const size = dataset.markerSize ?? 6;\r\n\r\n        ctx.save();\r\n        ctx.strokeStyle = dataset.markerColor ?? \"#000000\";\r\n        ctx.globalAlpha = dataset.markerAlpha ?? 0.8;\r\n        ctx.lineWidth = dataset.markerLineWidth ?? 2;\r\n        ctx.lineCap = \"round\";\r\n        ctx.beginPath();\r\n        ctx.moveTo(x - size, y - size);\r\n        ctx.lineTo(x + size, y + size);\r\n        ctx.moveTo(x - size, y + size);\r\n        ctx.lineTo(x + size, y - size);\r\n        ctx.stroke();\r\n        ctx.restore();\r\n      });\r\n    });\r\n  },\r\n};\r\n\r\nChart.register(...registerables, zoomPlugin, intersectionMarkerPlugin);\r\n\r\nconst ZOOM_STEP = 1.25;\r\n\r\n// Универсальный алгоритм обработки сигналов\r\nconst createSignalProcessor = () => {\r\n  const detectPeaks = (signal, options = {}) => {\r\n    const {\r\n      minPeakDistance = 100,\r\n      minPeakHeight = 0.1,\r\n      minPeakWidth = 10,\r\n      maxPeakWidth = 1000,\r\n      doubleSided = true\r\n    } = options;\r\n\r\n    const peaks = [];\r\n    const n = signal.length;\r\n\r\n    for (let i = 1; i < n - 1; i++) {\r\n      const isPeak = doubleSided \r\n        ? (signal[i] > signal[i-1] && signal[i] > signal[i+1]) || \r\n          (signal[i] < signal[i-1] && signal[i] < signal[i+1])\r\n        : signal[i] > signal[i-1] && signal[i] > signal[i+1];\r\n\r\n      if (isPeak && Math.abs(signal[i]) >= minPeakHeight) {\r\n        // Проверка расстояния до предыдущего пика\r\n        if (peaks.length > 0 && (i - peaks[peaks.length-1].index) < minPeakDistance) {\r\n          continue;\r\n        }\r\n\r\n        // Упрощенная проверка ширины пика\r\n        let width = 1;\r\n        let left = i - 1;\r\n        let right = i + 1;\r\n\r\n        while (left >= 0 && signal[left] <= signal[i] * 0.8) {\r\n          width++;\r\n          left--;\r\n        }\r\n        while (right < n && signal[right] <= signal[i] * 0.8) {\r\n          width++;\r\n          right++;\r\n        }\r\n\r\n        if (width >= minPeakWidth && width <= maxPeakWidth) {\r\n          peaks.push({\r\n            index: i,\r\n            value: signal[i],\r\n            width: width\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    return peaks;\r\n  };\r\n\r\n  const findZeroCrossings = (t, signal1, signal2, options = {}) => {\r\n    const {\r\n      threshold = 0.02,\r\n      minDistance = 100e-9,\r\n      maxIterations = 10\r\n    } = options;\r\n\r\n    const intersections = [];\r\n    const n = Math.min(t.length, signal1.length, signal2.length);\r\n\r\n    // Находим пересечения сигналов\r\n    for (let i = 1; i < n; i++) {\r\n      const diffPrev = signal1[i-1] - signal2[i-1];\r\n      const diffCurr = signal1[i] - signal2[i];\r\n\r\n      // Проверяем пересечение нуля разности сигналов\r\n      if ((diffPrev <= 0 && diffCurr > 0) || (diffPrev >= 0 && diffCurr < 0)) {\r\n        const t1 = t[i-1];\r\n        const t2 = t[i];\r\n        const diffDelta = diffCurr - diffPrev;\r\n\r\n        if (Math.abs(diffDelta) < 1e-10) continue;\r\n\r\n        const ratio = -diffPrev / diffDelta;\r\n        const time = t1 + ratio * (t2 - t1);\r\n        const value1 = signal1[i-1] + ratio * (signal1[i] - signal1[i-1]);\r\n        const value2 = signal2[i-1] + ratio * (signal2[i] - signal2[i-1]);\r\n        const avgValue = (value1 + value2) / 2;\r\n\r\n        if (Math.abs(avgValue) <= threshold) {\r\n          intersections.push({ \r\n            time, \r\n            value: avgValue,\r\n            index: i\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    // Фильтрация близких пересечений\r\n    let filteredIntersections = [...intersections];\r\n    let iteration = 0;\r\n\r\n    while (iteration < maxIterations) {\r\n      let changed = false;\r\n      \r\n      for (let i = filteredIntersections.length - 1; i > 0; i--) {\r\n        const timeDiff = filteredIntersections[i].time - filteredIntersections[i-1].time;\r\n        \r\n        if (timeDiff < minDistance) {\r\n          // Удаляем пересечение с меньшей амплитудой\r\n          if (Math.abs(filteredIntersections[i].value) > Math.abs(filteredIntersections[i-1].value)) {\r\n            filteredIntersections.splice(i-1, 1);\r\n          } else {\r\n            filteredIntersections.splice(i, 1);\r\n          }\r\n          changed = true;\r\n          break;\r\n        }\r\n      }\r\n      \r\n      if (!changed) break;\r\n      iteration++;\r\n    }\r\n\r\n    return filteredIntersections;\r\n  };\r\n\r\n  const calculateDerivative = (t, u) => {\r\n    const derivatives = [0]; // Первое значение\r\n    \r\n    for (let i = 1; i < u.length; i++) {\r\n      const du = u[i] - u[i-1];\r\n      const dt = t[i] - t[i-1];\r\n      \r\n      if (dt > 0) {\r\n        derivatives.push(du / dt);\r\n      } else {\r\n        derivatives.push(0);\r\n      }\r\n    }\r\n    \r\n    return derivatives;\r\n  };\r\n\r\n  const calculateCumulative = (t, values, initialValue = 0) => {\r\n    const cumulative = [initialValue];\r\n    \r\n    for (let i = 1; i < values.length; i++) {\r\n      cumulative.push(cumulative[i-1] + values[i]);\r\n    }\r\n    \r\n    return cumulative;\r\n  };\r\n\r\n  const processSignals = (rawData, processingParams = {}) => {\r\n    const {\r\n      tenzScale = 0.00132 * 1.25,\r\n      interfOffset = 0.04,\r\n      timeCorrection = 51.5e-6,\r\n      tenzTransformScale = 5000,\r\n      tenzTransformOffset = 0.38,\r\n      materialProperties = {\r\n        youngModulus: 71e9,\r\n        density: 2770\r\n      }\r\n    } = processingParams;\r\n\r\n    const { t: time, tenz: rawTenz, interf: rawInterf } = rawData;\r\n\r\n    // Предобработка сигналов\r\n    const tenz = rawTenz.map(val => val * tenzScale);\r\n    const interf = rawInterf.map(val => val + interfOffset);\r\n\r\n    // Находим пересечения сигналов\r\n    const intersections = findZeroCrossings(time, tenz, interf, {\r\n      threshold: 0.02,\r\n      minDistance: 100e-9\r\n    });\r\n\r\n    // Вычисляем производную и интеграл для интерферосигнала\r\n    const intersectionTimes = intersections.map(p => p.time);\r\n    const intersectionValues = intersections.map(p => p.value);\r\n\r\n    const derivatives = calculateDerivative(intersectionTimes, intersectionValues);\r\n    const cumulative = calculateCumulative(intersectionTimes, derivatives, 0.63/4 * 1e-6);\r\n\r\n    // Обработанные сигналы\r\n    const correctedTenz = tenz.map(val => -val * tenzTransformScale + tenzTransformOffset);\r\n    const correctedTime = time.map(val => val + 50e-6);\r\n\r\n    // Выходные данные для сохранения\r\n    const outputData = [];\r\n    const startIdx = Math.floor(time.length * 0.1); // Начинаем с 10% данных\r\n    const endIdx = Math.floor(time.length * 0.7); // До 70% данных\r\n    \r\n    for (let i = startIdx; i < endIdx; i += 10) {\r\n      outputData.push({\r\n        time: time[i] - time[startIdx],\r\n        stress: -(-tenz[i] * tenzTransformScale + tenzTransformOffset) * \r\n                Math.sqrt(materialProperties.youngModulus * materialProperties.density)\r\n      });\r\n    }\r\n\r\n    return {\r\n      originalSignals: { tenz, interf, time },\r\n      intersections,\r\n      derivatives: {\r\n        time: intersectionTimes.map(t => t - timeCorrection),\r\n        values: derivatives\r\n      },\r\n      cumulative: {\r\n        time: intersectionTimes.map(t => t - timeCorrection),\r\n        values: cumulative\r\n      },\r\n      processedSignals: {\r\n        time: correctedTime,\r\n        tenz: correctedTenz\r\n      },\r\n      outputData\r\n    };\r\n  };\r\n\r\n  return {\r\n    detectPeaks,\r\n    findZeroCrossings,\r\n    calculateDerivative,\r\n    calculateCumulative,\r\n    processSignals\r\n  };\r\n};\r\n\r\nconst ChartComponent = ({ data, processingParams = {} }) => {\r\n  const originalChartRef = useRef(null);\r\n  const processedChartRef = useRef(null);\r\n  const originalChartInstance = useRef(null);\r\n  const processedChartInstance = useRef(null);\r\n  \r\n  const [originalAxisVisibility, setOriginalAxisVisibility] = useState({});\r\n  const [processedAxisVisibility, setProcessedAxisVisibility] = useState({});\r\n  const [intersectionVisibility, setIntersectionVisibility] = useState(true);\r\n  const [tenzOffset, setTenzOffset] = useState(0);\r\n  const [currentIntersections, setCurrentIntersections] = useState([]);\r\n  const [processedData, setProcessedData] = useState(null);\r\n\r\n  // Инициализация процессора сигналов\r\n  const signalProcessor = useMemo(() => createSignalProcessor(), []);\r\n\r\n  // Обработка данных при их изменении\r\n  useEffect(() => {\r\n    if (!data?.rawData) return;\r\n\r\n    try {\r\n      const result = signalProcessor.processSignals(data.rawData, processingParams);\r\n      setProcessedData(result);\r\n      setCurrentIntersections(result.intersections);\r\n    } catch (error) {\r\n      console.error(\"Ошибка обработки сигналов:\", error);\r\n    }\r\n  }, [data, processingParams, signalProcessor]);\r\n\r\n  const formatTime = (value) => {\r\n    if (typeof value !== \"number\") return \"-\";\r\n    return value.toExponential(3);\r\n  };\r\n\r\n  const formatSignal = (value) => {\r\n    if (typeof value !== \"number\") return \"-\";\r\n    return value.toFixed(5);\r\n  };\r\n\r\n  // Подготовка данных для графиков\r\n  const chartData = useMemo(() => {\r\n    if (!processedData || !data?.rawData) return null;\r\n\r\n    const { t: time } = data.rawData;\r\n    const { \r\n      originalSignals, \r\n      intersections, \r\n      derivatives, \r\n      cumulative, \r\n      processedSignals \r\n    } = processedData;\r\n\r\n    // Применяем сдвиг к тензосигналу\r\n    const shiftedTenz = originalSignals.tenz.map(val => val + tenzOffset);\r\n\r\n    return {\r\n      original: [\r\n        {\r\n          label: \"Тензометрический сигнал (CH1)\",\r\n          data: time.map((t, i) => ({ x: t, y: shiftedTenz[i] })),\r\n          borderColor: \"blue\",\r\n          backgroundColor: \"rgba(0, 0, 255, 0.1)\",\r\n          tension: 0.1,\r\n          pointRadius: 0\r\n        },\r\n        {\r\n          label: \"Интерферометрический сигнал (CH2)\",\r\n          data: time.map((t, i) => ({ x: t, y: originalSignals.interf[i] })),\r\n          borderColor: \"red\",\r\n          backgroundColor: \"rgba(255, 0, 0, 0.1)\",\r\n          tension: 0.1,\r\n          pointRadius: 0\r\n        },\r\n        {\r\n          label: `Пересечения (${intersections.length} точек)`,\r\n          data: intersections.map(p => ({ x: p.time, y: p.value })),\r\n          borderColor: \"black\",\r\n          backgroundColor: \"rgba(0, 0, 0, 0.8)\",\r\n          pointRadius: 4,\r\n          showLine: false,\r\n          intersectionMarker: true,\r\n          markerSize: 6,\r\n          markerColor: \"#000000\"\r\n        }\r\n      ],\r\n      processed: [\r\n        {\r\n          label: \"Производная интерферосигнала\",\r\n          data: derivatives.time.map((t, i) => ({ x: t, y: derivatives.values[i] })),\r\n          borderColor: \"green\",\r\n          backgroundColor: \"rgba(0, 255, 0, 0.1)\",\r\n          tension: 0.1,\r\n          pointRadius: 0\r\n        },\r\n        {\r\n          label: \"Скорректированный тензосигнал\",\r\n          data: processedSignals.time.map((t, i) => ({ \r\n            x: t, \r\n            y: -shiftedTenz[i] * 5000 + 0.38 \r\n          })),\r\n          borderColor: \"purple\",\r\n          backgroundColor: \"rgba(128, 0, 128, 0.1)\",\r\n          tension: 0.1,\r\n          pointRadius: 0\r\n        },\r\n        {\r\n          label: \"Интеграл интерферосигнала\",\r\n          data: cumulative.time.map((t, i) => ({ x: t, y: cumulative.values[i] })),\r\n          borderColor: \"orange\",\r\n          backgroundColor: \"rgba(255, 165, 0, 0.1)\",\r\n          tension: 0.1,\r\n          pointRadius: 0\r\n        }\r\n      ],\r\n      intersections\r\n    };\r\n  }, [processedData, data?.rawData, tenzOffset]);\r\n\r\n  // Инициализация и обновление графиков\r\n  useEffect(() => {\r\n    if (!chartData) return;\r\n\r\n    const buildOptions = (title, yLabel) => ({\r\n      responsive: true,\r\n      interaction: {\r\n        mode: \"index\",\r\n        intersect: false,\r\n      },\r\n      scales: {\r\n        x: {\r\n          type: \"linear\",\r\n          title: {\r\n            display: true,\r\n            text: \"Время (секунды)\",\r\n          },\r\n        },\r\n        y: {\r\n          type: \"linear\",\r\n          title: {\r\n            display: true,\r\n            text: yLabel,\r\n          },\r\n        },\r\n      },\r\n      plugins: {\r\n        title: {\r\n          display: true,\r\n          text: title,\r\n        },\r\n        legend: {\r\n          display: true,\r\n        },\r\n        zoom: {\r\n          pan: {\r\n            enabled: true,\r\n            mode: \"xy\",\r\n          },\r\n          zoom: {\r\n            wheel: {\r\n              enabled: true,\r\n              modifierKey: \"ctrl\",\r\n            },\r\n            pinch: {\r\n              enabled: true,\r\n            },\r\n            drag: {\r\n              enabled: false,\r\n            },\r\n            mode: \"xy\",\r\n          },\r\n        },\r\n      },\r\n    });\r\n\r\n    // Уничтожаем старые графики\r\n    if (originalChartInstance.current) {\r\n      originalChartInstance.current.destroy();\r\n    }\r\n    if (processedChartInstance.current) {\r\n      processedChartInstance.current.destroy();\r\n    }\r\n\r\n    // Создаем новые графики\r\n    if (originalChartRef.current) {\r\n      const ctx = originalChartRef.current.getContext(\"2d\");\r\n      originalChartInstance.current = new Chart(ctx, {\r\n        type: \"line\",\r\n        data: {\r\n          datasets: chartData.original,\r\n        },\r\n        options: buildOptions(\"Исходные сигналы с пересечениями\", \"Сигнал (В)\"),\r\n      });\r\n    }\r\n\r\n    if (processedChartRef.current) {\r\n      const ctx = processedChartRef.current.getContext(\"2d\");\r\n      processedChartInstance.current = new Chart(ctx, {\r\n        type: \"line\",\r\n        data: {\r\n          datasets: chartData.processed,\r\n        },\r\n        options: buildOptions(\"Обработанные сигналы\", \"Сигнал\"),\r\n      });\r\n    }\r\n\r\n    return () => {\r\n      originalChartInstance.current?.destroy();\r\n      processedChartInstance.current?.destroy();\r\n    };\r\n  }, [chartData]);\r\n\r\n  // Инициализация видимости осей\r\n  useEffect(() => {\r\n    if (chartData?.original) {\r\n      const visibilityMap = {};\r\n      chartData.original.forEach((dataset) => {\r\n        visibilityMap[dataset.label] = true;\r\n      });\r\n      setOriginalAxisVisibility(visibilityMap);\r\n    }\r\n\r\n    if (chartData?.processed) {\r\n      const visibilityMap = {};\r\n      chartData.processed.forEach((dataset) => {\r\n        visibilityMap[dataset.label] = true;\r\n      });\r\n      setProcessedAxisVisibility(visibilityMap);\r\n    }\r\n  }, [chartData]);\r\n\r\n  const handleResetOriginal = useCallback(() => {\r\n    originalChartInstance.current?.resetZoom();\r\n  }, []);\r\n\r\n  const handleResetProcessed = useCallback(() => {\r\n    processedChartInstance.current?.resetZoom();\r\n  }, []);\r\n\r\n  const zoomChart = useCallback((chartRef, factor) => {\r\n    chartRef.current?.zoom({ x: factor, y: factor });\r\n  }, []);\r\n\r\n  const handleZoomOriginalIn = useCallback(() => {\r\n    zoomChart(originalChartInstance, ZOOM_STEP);\r\n  }, [zoomChart]);\r\n\r\n  const handleZoomOriginalOut = useCallback(() => {\r\n    zoomChart(originalChartInstance, 1 / ZOOM_STEP);\r\n  }, [zoomChart]);\r\n\r\n  const handleZoomProcessedIn = useCallback(() => {\r\n    zoomChart(processedChartInstance, ZOOM_STEP);\r\n  }, [zoomChart]);\r\n\r\n  const handleZoomProcessedOut = useCallback(() => {\r\n    zoomChart(processedChartInstance, 1 / ZOOM_STEP);\r\n  }, [zoomChart]);\r\n\r\n  const handleAxisToggle = useCallback(\r\n    (chartInstanceRef, label, visibilityState, setVisibilityState) => {\r\n      const current = visibilityState[label] ?? true;\r\n      const next = !current;\r\n\r\n      setVisibilityState((prev) => ({\r\n        ...prev,\r\n        [label]: next,\r\n      }));\r\n\r\n      const chart = chartInstanceRef.current;\r\n      if (!chart) return;\r\n\r\n      const datasetIndex = chart.data.datasets.findIndex(\r\n        (dataset) => dataset.label === label\r\n      );\r\n\r\n      if (datasetIndex === -1) return;\r\n\r\n      chart.setDatasetVisibility(datasetIndex, next);\r\n      chart.update(\"none\");\r\n    },\r\n    []\r\n  );\r\n\r\n  const handleIntersectionToggle = useCallback(() => {\r\n    const next = !intersectionVisibility;\r\n    setIntersectionVisibility(next);\r\n\r\n    const chart = originalChartInstance.current;\r\n    if (!chart) return;\r\n\r\n    const datasetIndex = chart.data.datasets.findIndex(\r\n      (dataset) => dataset.intersectionMarker\r\n    );\r\n\r\n    if (datasetIndex === -1) return;\r\n\r\n    chart.setDatasetVisibility(datasetIndex, next);\r\n    chart.update(\"none\");\r\n  }, [intersectionVisibility]);\r\n\r\n  const originalAxisOptions = useMemo(() => {\r\n    return (chartData?.original ?? [])\r\n      .filter((dataset) => !dataset.intersectionMarker)\r\n      .map((dataset) => ({\r\n        label: dataset.label,\r\n        color: dataset.borderColor,\r\n      }));\r\n  }, [chartData]);\r\n\r\n  const processedAxisOptions = useMemo(() => {\r\n    return (chartData?.processed ?? []).map((dataset) => ({\r\n      label: dataset.label,\r\n      color: dataset.borderColor,\r\n    }));\r\n  }, [chartData]);\r\n\r\n  const offsetRange = useMemo(() => {\r\n    if (!data?.rawData?.tenz) {\r\n      return { min: -1, max: 1, step: 0.001 };\r\n    }\r\n    const values = data.rawData.tenz;\r\n    const range = Math.max(...values) - Math.min(...values);\r\n    return {\r\n      min: -range,\r\n      max: range,\r\n      step: range / 1000,\r\n    };\r\n  }, [data?.rawData]);\r\n\r\n  const averageY = useMemo(() => {\r\n    if (currentIntersections.length === 0) return 0;\r\n    const sum = currentIntersections.reduce((acc, point) => acc + point.value, 0);\r\n    return sum / currentIntersections.length;\r\n  }, [currentIntersections]);\r\n\r\n  return (\r\n    <div className=\"charts-wrapper\">\r\n      {data?.rawData && (\r\n        <div className=\"tenz-offset-control\">\r\n          <label htmlFor=\"tenz-offset-input\" className=\"tenz-offset-label\">\r\n            Сдвиг тензометрического сигнала (CH1) по оси Y:\r\n          </label>\r\n          <div className=\"tenz-offset-input-group\">\r\n            <input\r\n              id=\"tenz-offset-input\"\r\n              type=\"range\"\r\n              min={offsetRange.min}\r\n              max={offsetRange.max}\r\n              step={offsetRange.step}\r\n              value={tenzOffset}\r\n              onChange={(e) => setTenzOffset(parseFloat(e.target.value))}\r\n              className=\"tenz-offset-slider\"\r\n            />\r\n            <input\r\n              type=\"number\"\r\n              min={offsetRange.min}\r\n              max={offsetRange.max}\r\n              step={offsetRange.step}\r\n              value={tenzOffset}\r\n              onChange={(e) =>\r\n                setTenzOffset(parseFloat(e.target.value) || 0)\r\n              }\r\n              className=\"tenz-offset-number\"\r\n            />\r\n            <button\r\n              type=\"button\"\r\n              className=\"tenz-offset-reset-btn\"\r\n              onClick={() => setTenzOffset(0)}\r\n              aria-label=\"Сбросить сдвиг\"\r\n            >\r\n              Сбросить\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <section className=\"chart-section\">\r\n        <div className=\"chart-controls-group\">\r\n          <div className=\"zoom-controls\" role=\"group\" aria-label=\"Управление масштабом\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"zoom-control-btn\"\r\n              onClick={handleZoomOriginalOut}\r\n              aria-label=\"Уменьшить масштаб\"\r\n            >\r\n              -\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              className=\"zoom-control-btn\"\r\n              onClick={handleZoomOriginalIn}\r\n              aria-label=\"Увеличить масштаб\"\r\n            >\r\n              +\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              className=\"zoom-reset-btn\"\r\n              onClick={handleResetOriginal}\r\n              aria-label=\"Сбросить масштаб\"\r\n            >\r\n              ↺ Сбросить\r\n            </button>\r\n          </div>\r\n        </div>\r\n        \r\n        {originalAxisOptions.length > 0 && (\r\n          <div className=\"axis-toggle-group\" role=\"group\" aria-label=\"Отображение осей исходных сигналов\">\r\n            {originalAxisOptions.map(({ label, color }) => {\r\n              const isActive = originalAxisVisibility[label] ?? true;\r\n              return (\r\n                <button\r\n                  key={label}\r\n                  type=\"button\"\r\n                  className={`axis-toggle-btn ${isActive ? \"axis-toggle-btn--active\" : \"\"}`}\r\n                  onClick={() =>\r\n                    handleAxisToggle(\r\n                      originalChartInstance,\r\n                      label,\r\n                      originalAxisVisibility,\r\n                      setOriginalAxisVisibility\r\n                    )\r\n                  }\r\n                  aria-pressed={isActive}\r\n                >\r\n                  <span\r\n                    className=\"axis-toggle-btn__indicator\"\r\n                    style={{\r\n                      borderColor: color,\r\n                      backgroundColor: isActive ? color : \"transparent\",\r\n                    }}\r\n                    aria-hidden=\"true\"\r\n                  />\r\n                  <span className=\"axis-toggle-btn__label\">{label}</span>\r\n                </button>\r\n              );\r\n            })}\r\n            <button\r\n              type=\"button\"\r\n              className={`axis-toggle-btn ${intersectionVisibility ? \"axis-toggle-btn--active\" : \"\"}`}\r\n              onClick={handleIntersectionToggle}\r\n              aria-pressed={intersectionVisibility}\r\n            >\r\n              <span\r\n                className=\"axis-toggle-btn__indicator\"\r\n                style={{\r\n                  borderColor: \"#000000\",\r\n                  backgroundColor: intersectionVisibility ? \"#000000\" : \"transparent\",\r\n                }}\r\n                aria-hidden=\"true\"\r\n              />\r\n              <span className=\"axis-toggle-btn__label\">\r\n                Пересечения сигналов\r\n              </span>\r\n            </button>\r\n          </div>\r\n        )}\r\n        <canvas ref={originalChartRef} width=\"800\" height=\"400\"></canvas>\r\n      </section>\r\n\r\n      <section className=\"chart-section\">\r\n        <div className=\"chart-controls-group\">\r\n          <div className=\"zoom-controls\" role=\"group\" aria-label=\"Управление масштабом\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"zoom-control-btn\"\r\n              onClick={handleZoomProcessedOut}\r\n              aria-label=\"Уменьшить масштаб\"\r\n            >\r\n              -\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              className=\"zoom-control-btn\"\r\n              onClick={handleZoomProcessedIn}\r\n              aria-label=\"Увеличить масштаб\"\r\n            >\r\n              +\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              className=\"zoom-reset-btn\"\r\n              onClick={handleResetProcessed}\r\n              aria-label=\"Сбросить масштаб\"\r\n            >\r\n              ↺ Сбросить\r\n            </button>\r\n          </div>\r\n        </div>\r\n        \r\n        {processedAxisOptions.length > 0 && (\r\n          <div className=\"axis-toggle-group\" role=\"group\" aria-label=\"Отображение осей обработанных сигналов\">\r\n            {processedAxisOptions.map(({ label, color }) => {\r\n              const isActive = processedAxisVisibility[label] ?? true;\r\n              return (\r\n                <button\r\n                  key={label}\r\n                  type=\"button\"\r\n                  className={`axis-toggle-btn ${isActive ? \"axis-toggle-btn--active\" : \"\"}`}\r\n                  onClick={() =>\r\n                    handleAxisToggle(\r\n                      processedChartInstance,\r\n                      label,\r\n                      processedAxisVisibility,\r\n                      setProcessedAxisVisibility\r\n                    )\r\n                  }\r\n                  aria-pressed={isActive}\r\n                >\r\n                  <span\r\n                    className=\"axis-toggle-btn__indicator\"\r\n                    style={{\r\n                      borderColor: color,\r\n                      backgroundColor: isActive ? color : \"transparent\",\r\n                    }}\r\n                    aria-hidden=\"true\"\r\n                  />\r\n                  <span className=\"axis-toggle-btn__label\">{label}</span>\r\n                </button>\r\n              );\r\n            })}\r\n          </div>\r\n        )}\r\n        <canvas ref={processedChartRef} width=\"800\" height=\"400\"></canvas>\r\n      </section>\r\n\r\n      {currentIntersections.length > 0 && (\r\n        <aside className=\"intersection-panel\">\r\n          <div className=\"intersection-panel__header\">\r\n            <span className=\"chart-chip chart-chip--highlight\">\r\n              Обнаружено {currentIntersections.length} пересечений\r\n            </span>\r\n            <p>Среднее значение Y: {averageY.toFixed(4)}</p>\r\n          </div>\r\n          <div className=\"intersection-table-wrapper\">\r\n            <table className=\"intersection-table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>#</th>\r\n                  <th>Время (с)</th>\r\n                  <th>Амплитуда (В)</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {currentIntersections.map((point, idx) => (\r\n                  <tr key={`${point.time}-${idx}`}>\r\n                    <td>{idx + 1}</td>\r\n                    <td>{formatTime(point.time)}</td>\r\n                    <td>{formatSignal(point.value)}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </aside>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChartComponent;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,EAAEC,WAAW,EAAEC,QAAQ,EAAEC,OAAO,QAAQ,OAAO;AAChF,SAASC,KAAK,EAAEC,aAAa,QAAQ,UAAU;AAC/C,OAAOC,UAAU,MAAM,qBAAqB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE7C,MAAMC,wBAAwB,GAAG;EAC/BC,EAAE,EAAE,oBAAoB;EACxBC,iBAAiBA,CAACC,KAAK,EAAE;IACvB,MAAM;MAAEC;IAAI,CAAC,GAAGD,KAAK;IACrBA,KAAK,CAACE,IAAI,CAACC,QAAQ,CAACC,OAAO,CAAC,CAACC,OAAO,EAAEC,YAAY,KAAK;MACrD,IAAI,EAACD,OAAO,aAAPA,OAAO,eAAPA,OAAO,CAAEE,kBAAkB,GAAE;MAElC,MAAMC,IAAI,GAAGR,KAAK,CAACS,cAAc,CAACH,YAAY,CAAC;MAC/C,IAAI,CAACN,KAAK,CAACU,gBAAgB,CAACJ,YAAY,CAAC,EAAE;MAE3CE,IAAI,CAACN,IAAI,CAACE,OAAO,CAAEO,OAAO,IAAK;QAAA,IAAAC,mBAAA,EAAAC,oBAAA,EAAAC,oBAAA,EAAAC,qBAAA;QAC7B,MAAMC,CAAC,GAAGL,OAAO,CAACK,CAAC;QACnB,MAAMC,CAAC,GAAGN,OAAO,CAACM,CAAC;QAEnB,IAAID,CAAC,KAAKE,SAAS,IAAID,CAAC,KAAKC,SAAS,IAAIC,KAAK,CAACH,CAAC,CAAC,IAAIG,KAAK,CAACF,CAAC,CAAC,EAAE;QAEhE,MAAMG,IAAI,IAAAR,mBAAA,GAAGP,OAAO,CAACgB,UAAU,cAAAT,mBAAA,cAAAA,mBAAA,GAAI,CAAC;QAEpCX,GAAG,CAACqB,IAAI,CAAC,CAAC;QACVrB,GAAG,CAACsB,WAAW,IAAAV,oBAAA,GAAGR,OAAO,CAACmB,WAAW,cAAAX,oBAAA,cAAAA,oBAAA,GAAI,SAAS;QAClDZ,GAAG,CAACwB,WAAW,IAAAX,oBAAA,GAAGT,OAAO,CAACqB,WAAW,cAAAZ,oBAAA,cAAAA,oBAAA,GAAI,GAAG;QAC5Cb,GAAG,CAAC0B,SAAS,IAAAZ,qBAAA,GAAGV,OAAO,CAACuB,eAAe,cAAAb,qBAAA,cAAAA,qBAAA,GAAI,CAAC;QAC5Cd,GAAG,CAAC4B,OAAO,GAAG,OAAO;QACrB5B,GAAG,CAAC6B,SAAS,CAAC,CAAC;QACf7B,GAAG,CAAC8B,MAAM,CAACf,CAAC,GAAGI,IAAI,EAAEH,CAAC,GAAGG,IAAI,CAAC;QAC9BnB,GAAG,CAAC+B,MAAM,CAAChB,CAAC,GAAGI,IAAI,EAAEH,CAAC,GAAGG,IAAI,CAAC;QAC9BnB,GAAG,CAAC8B,MAAM,CAACf,CAAC,GAAGI,IAAI,EAAEH,CAAC,GAAGG,IAAI,CAAC;QAC9BnB,GAAG,CAAC+B,MAAM,CAAChB,CAAC,GAAGI,IAAI,EAAEH,CAAC,GAAGG,IAAI,CAAC;QAC9BnB,GAAG,CAACgC,MAAM,CAAC,CAAC;QACZhC,GAAG,CAACiC,OAAO,CAAC,CAAC;MACf,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;AACF,CAAC;AAED1C,KAAK,CAAC2C,QAAQ,CAAC,GAAG1C,aAAa,EAAEC,UAAU,EAAEG,wBAAwB,CAAC;AAEtE,MAAMuC,SAAS,GAAG,IAAI;;AAEtB;AACA,MAAMC,qBAAqB,GAAGA,CAAA,KAAM;EAClC,MAAMC,WAAW,GAAGA,CAACC,MAAM,EAAEC,OAAO,GAAG,CAAC,CAAC,KAAK;IAC5C,MAAM;MACJC,eAAe,GAAG,GAAG;MACrBC,aAAa,GAAG,GAAG;MACnBC,YAAY,GAAG,EAAE;MACjBC,YAAY,GAAG,IAAI;MACnBC,WAAW,GAAG;IAChB,CAAC,GAAGL,OAAO;IAEX,MAAMM,KAAK,GAAG,EAAE;IAChB,MAAMC,CAAC,GAAGR,MAAM,CAACS,MAAM;IAEvB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,CAAC,GAAG,CAAC,EAAEE,CAAC,EAAE,EAAE;MAC9B,MAAMC,MAAM,GAAGL,WAAW,GACrBN,MAAM,CAACU,CAAC,CAAC,GAAGV,MAAM,CAACU,CAAC,GAAC,CAAC,CAAC,IAAIV,MAAM,CAACU,CAAC,CAAC,GAAGV,MAAM,CAACU,CAAC,GAAC,CAAC,CAAC,IAClDV,MAAM,CAACU,CAAC,CAAC,GAAGV,MAAM,CAACU,CAAC,GAAC,CAAC,CAAC,IAAIV,MAAM,CAACU,CAAC,CAAC,GAAGV,MAAM,CAACU,CAAC,GAAC,CAAC,CAAE,GACpDV,MAAM,CAACU,CAAC,CAAC,GAAGV,MAAM,CAACU,CAAC,GAAC,CAAC,CAAC,IAAIV,MAAM,CAACU,CAAC,CAAC,GAAGV,MAAM,CAACU,CAAC,GAAC,CAAC,CAAC;MAEtD,IAAIC,MAAM,IAAIC,IAAI,CAACC,GAAG,CAACb,MAAM,CAACU,CAAC,CAAC,CAAC,IAAIP,aAAa,EAAE;QAClD;QACA,IAAII,KAAK,CAACE,MAAM,GAAG,CAAC,IAAKC,CAAC,GAAGH,KAAK,CAACA,KAAK,CAACE,MAAM,GAAC,CAAC,CAAC,CAACK,KAAK,GAAIZ,eAAe,EAAE;UAC3E;QACF;;QAEA;QACA,IAAIa,KAAK,GAAG,CAAC;QACb,IAAIC,IAAI,GAAGN,CAAC,GAAG,CAAC;QAChB,IAAIO,KAAK,GAAGP,CAAC,GAAG,CAAC;QAEjB,OAAOM,IAAI,IAAI,CAAC,IAAIhB,MAAM,CAACgB,IAAI,CAAC,IAAIhB,MAAM,CAACU,CAAC,CAAC,GAAG,GAAG,EAAE;UACnDK,KAAK,EAAE;UACPC,IAAI,EAAE;QACR;QACA,OAAOC,KAAK,GAAGT,CAAC,IAAIR,MAAM,CAACiB,KAAK,CAAC,IAAIjB,MAAM,CAACU,CAAC,CAAC,GAAG,GAAG,EAAE;UACpDK,KAAK,EAAE;UACPE,KAAK,EAAE;QACT;QAEA,IAAIF,KAAK,IAAIX,YAAY,IAAIW,KAAK,IAAIV,YAAY,EAAE;UAClDE,KAAK,CAACW,IAAI,CAAC;YACTJ,KAAK,EAAEJ,CAAC;YACRS,KAAK,EAAEnB,MAAM,CAACU,CAAC,CAAC;YAChBK,KAAK,EAAEA;UACT,CAAC,CAAC;QACJ;MACF;IACF;IAEA,OAAOR,KAAK;EACd,CAAC;EAED,MAAMa,iBAAiB,GAAGA,CAACC,CAAC,EAAEC,OAAO,EAAEC,OAAO,EAAEtB,OAAO,GAAG,CAAC,CAAC,KAAK;IAC/D,MAAM;MACJuB,SAAS,GAAG,IAAI;MAChBC,WAAW,GAAG,MAAM;MACpBC,aAAa,GAAG;IAClB,CAAC,GAAGzB,OAAO;IAEX,MAAM0B,aAAa,GAAG,EAAE;IACxB,MAAMnB,CAAC,GAAGI,IAAI,CAACgB,GAAG,CAACP,CAAC,CAACZ,MAAM,EAAEa,OAAO,CAACb,MAAM,EAAEc,OAAO,CAACd,MAAM,CAAC;;IAE5D;IACA,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,CAAC,EAAEE,CAAC,EAAE,EAAE;MAC1B,MAAMmB,QAAQ,GAAGP,OAAO,CAACZ,CAAC,GAAC,CAAC,CAAC,GAAGa,OAAO,CAACb,CAAC,GAAC,CAAC,CAAC;MAC5C,MAAMoB,QAAQ,GAAGR,OAAO,CAACZ,CAAC,CAAC,GAAGa,OAAO,CAACb,CAAC,CAAC;;MAExC;MACA,IAAKmB,QAAQ,IAAI,CAAC,IAAIC,QAAQ,GAAG,CAAC,IAAMD,QAAQ,IAAI,CAAC,IAAIC,QAAQ,GAAG,CAAE,EAAE;QACtE,MAAMC,EAAE,GAAGV,CAAC,CAACX,CAAC,GAAC,CAAC,CAAC;QACjB,MAAMsB,EAAE,GAAGX,CAAC,CAACX,CAAC,CAAC;QACf,MAAMuB,SAAS,GAAGH,QAAQ,GAAGD,QAAQ;QAErC,IAAIjB,IAAI,CAACC,GAAG,CAACoB,SAAS,CAAC,GAAG,KAAK,EAAE;QAEjC,MAAMC,KAAK,GAAG,CAACL,QAAQ,GAAGI,SAAS;QACnC,MAAME,IAAI,GAAGJ,EAAE,GAAGG,KAAK,IAAIF,EAAE,GAAGD,EAAE,CAAC;QACnC,MAAMK,MAAM,GAAGd,OAAO,CAACZ,CAAC,GAAC,CAAC,CAAC,GAAGwB,KAAK,IAAIZ,OAAO,CAACZ,CAAC,CAAC,GAAGY,OAAO,CAACZ,CAAC,GAAC,CAAC,CAAC,CAAC;QACjE,MAAM2B,MAAM,GAAGd,OAAO,CAACb,CAAC,GAAC,CAAC,CAAC,GAAGwB,KAAK,IAAIX,OAAO,CAACb,CAAC,CAAC,GAAGa,OAAO,CAACb,CAAC,GAAC,CAAC,CAAC,CAAC;QACjE,MAAM4B,QAAQ,GAAG,CAACF,MAAM,GAAGC,MAAM,IAAI,CAAC;QAEtC,IAAIzB,IAAI,CAACC,GAAG,CAACyB,QAAQ,CAAC,IAAId,SAAS,EAAE;UACnCG,aAAa,CAACT,IAAI,CAAC;YACjBiB,IAAI;YACJhB,KAAK,EAAEmB,QAAQ;YACfxB,KAAK,EAAEJ;UACT,CAAC,CAAC;QACJ;MACF;IACF;;IAEA;IACA,IAAI6B,qBAAqB,GAAG,CAAC,GAAGZ,aAAa,CAAC;IAC9C,IAAIa,SAAS,GAAG,CAAC;IAEjB,OAAOA,SAAS,GAAGd,aAAa,EAAE;MAChC,IAAIe,OAAO,GAAG,KAAK;MAEnB,KAAK,IAAI/B,CAAC,GAAG6B,qBAAqB,CAAC9B,MAAM,GAAG,CAAC,EAAEC,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;QACzD,MAAMgC,QAAQ,GAAGH,qBAAqB,CAAC7B,CAAC,CAAC,CAACyB,IAAI,GAAGI,qBAAqB,CAAC7B,CAAC,GAAC,CAAC,CAAC,CAACyB,IAAI;QAEhF,IAAIO,QAAQ,GAAGjB,WAAW,EAAE;UAC1B;UACA,IAAIb,IAAI,CAACC,GAAG,CAAC0B,qBAAqB,CAAC7B,CAAC,CAAC,CAACS,KAAK,CAAC,GAAGP,IAAI,CAACC,GAAG,CAAC0B,qBAAqB,CAAC7B,CAAC,GAAC,CAAC,CAAC,CAACS,KAAK,CAAC,EAAE;YACzFoB,qBAAqB,CAACI,MAAM,CAACjC,CAAC,GAAC,CAAC,EAAE,CAAC,CAAC;UACtC,CAAC,MAAM;YACL6B,qBAAqB,CAACI,MAAM,CAACjC,CAAC,EAAE,CAAC,CAAC;UACpC;UACA+B,OAAO,GAAG,IAAI;UACd;QACF;MACF;MAEA,IAAI,CAACA,OAAO,EAAE;MACdD,SAAS,EAAE;IACb;IAEA,OAAOD,qBAAqB;EAC9B,CAAC;EAED,MAAMK,mBAAmB,GAAGA,CAACvB,CAAC,EAAEwB,CAAC,KAAK;IACpC,MAAMC,WAAW,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;;IAEzB,KAAK,IAAIpC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGmC,CAAC,CAACpC,MAAM,EAAEC,CAAC,EAAE,EAAE;MACjC,MAAMqC,EAAE,GAAGF,CAAC,CAACnC,CAAC,CAAC,GAAGmC,CAAC,CAACnC,CAAC,GAAC,CAAC,CAAC;MACxB,MAAMsC,EAAE,GAAG3B,CAAC,CAACX,CAAC,CAAC,GAAGW,CAAC,CAACX,CAAC,GAAC,CAAC,CAAC;MAExB,IAAIsC,EAAE,GAAG,CAAC,EAAE;QACVF,WAAW,CAAC5B,IAAI,CAAC6B,EAAE,GAAGC,EAAE,CAAC;MAC3B,CAAC,MAAM;QACLF,WAAW,CAAC5B,IAAI,CAAC,CAAC,CAAC;MACrB;IACF;IAEA,OAAO4B,WAAW;EACpB,CAAC;EAED,MAAMG,mBAAmB,GAAGA,CAAC5B,CAAC,EAAE6B,MAAM,EAAEC,YAAY,GAAG,CAAC,KAAK;IAC3D,MAAMC,UAAU,GAAG,CAACD,YAAY,CAAC;IAEjC,KAAK,IAAIzC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGwC,MAAM,CAACzC,MAAM,EAAEC,CAAC,EAAE,EAAE;MACtC0C,UAAU,CAAClC,IAAI,CAACkC,UAAU,CAAC1C,CAAC,GAAC,CAAC,CAAC,GAAGwC,MAAM,CAACxC,CAAC,CAAC,CAAC;IAC9C;IAEA,OAAO0C,UAAU;EACnB,CAAC;EAED,MAAMC,cAAc,GAAGA,CAACC,OAAO,EAAEC,gBAAgB,GAAG,CAAC,CAAC,KAAK;IACzD,MAAM;MACJC,SAAS,GAAG,OAAO,GAAG,IAAI;MAC1BC,YAAY,GAAG,IAAI;MACnBC,cAAc,GAAG,OAAO;MACxBC,kBAAkB,GAAG,IAAI;MACzBC,mBAAmB,GAAG,IAAI;MAC1BC,kBAAkB,GAAG;QACnBC,YAAY,EAAE,IAAI;QAClBC,OAAO,EAAE;MACX;IACF,CAAC,GAAGR,gBAAgB;IAEpB,MAAM;MAAElC,CAAC,EAAEc,IAAI;MAAE6B,IAAI,EAAEC,OAAO;MAAEC,MAAM,EAAEC;IAAU,CAAC,GAAGb,OAAO;;IAE7D;IACA,MAAMU,IAAI,GAAGC,OAAO,CAACG,GAAG,CAACC,GAAG,IAAIA,GAAG,GAAGb,SAAS,CAAC;IAChD,MAAMU,MAAM,GAAGC,SAAS,CAACC,GAAG,CAACC,GAAG,IAAIA,GAAG,GAAGZ,YAAY,CAAC;;IAEvD;IACA,MAAM9B,aAAa,GAAGP,iBAAiB,CAACe,IAAI,EAAE6B,IAAI,EAAEE,MAAM,EAAE;MAC1D1C,SAAS,EAAE,IAAI;MACfC,WAAW,EAAE;IACf,CAAC,CAAC;;IAEF;IACA,MAAM6C,iBAAiB,GAAG3C,aAAa,CAACyC,GAAG,CAACG,CAAC,IAAIA,CAAC,CAACpC,IAAI,CAAC;IACxD,MAAMqC,kBAAkB,GAAG7C,aAAa,CAACyC,GAAG,CAACG,CAAC,IAAIA,CAAC,CAACpD,KAAK,CAAC;IAE1D,MAAM2B,WAAW,GAAGF,mBAAmB,CAAC0B,iBAAiB,EAAEE,kBAAkB,CAAC;IAC9E,MAAMpB,UAAU,GAAGH,mBAAmB,CAACqB,iBAAiB,EAAExB,WAAW,EAAE,IAAI,GAAC,CAAC,GAAG,IAAI,CAAC;;IAErF;IACA,MAAM2B,aAAa,GAAGT,IAAI,CAACI,GAAG,CAACC,GAAG,IAAI,CAACA,GAAG,GAAGV,kBAAkB,GAAGC,mBAAmB,CAAC;IACtF,MAAMc,aAAa,GAAGvC,IAAI,CAACiC,GAAG,CAACC,GAAG,IAAIA,GAAG,GAAG,KAAK,CAAC;;IAElD;IACA,MAAMM,UAAU,GAAG,EAAE;IACrB,MAAMC,QAAQ,GAAGhE,IAAI,CAACiE,KAAK,CAAC1C,IAAI,CAAC1B,MAAM,GAAG,GAAG,CAAC,CAAC,CAAC;IAChD,MAAMqE,MAAM,GAAGlE,IAAI,CAACiE,KAAK,CAAC1C,IAAI,CAAC1B,MAAM,GAAG,GAAG,CAAC,CAAC,CAAC;;IAE9C,KAAK,IAAIC,CAAC,GAAGkE,QAAQ,EAAElE,CAAC,GAAGoE,MAAM,EAAEpE,CAAC,IAAI,EAAE,EAAE;MAC1CiE,UAAU,CAACzD,IAAI,CAAC;QACdiB,IAAI,EAAEA,IAAI,CAACzB,CAAC,CAAC,GAAGyB,IAAI,CAACyC,QAAQ,CAAC;QAC9BG,MAAM,EAAE,EAAE,CAACf,IAAI,CAACtD,CAAC,CAAC,GAAGiD,kBAAkB,GAAGC,mBAAmB,CAAC,GACtDhD,IAAI,CAACoE,IAAI,CAACnB,kBAAkB,CAACC,YAAY,GAAGD,kBAAkB,CAACE,OAAO;MAChF,CAAC,CAAC;IACJ;IAEA,OAAO;MACLkB,eAAe,EAAE;QAAEjB,IAAI;QAAEE,MAAM;QAAE/B;MAAK,CAAC;MACvCR,aAAa;MACbmB,WAAW,EAAE;QACXX,IAAI,EAAEmC,iBAAiB,CAACF,GAAG,CAAC/C,CAAC,IAAIA,CAAC,GAAGqC,cAAc,CAAC;QACpDR,MAAM,EAAEJ;MACV,CAAC;MACDM,UAAU,EAAE;QACVjB,IAAI,EAAEmC,iBAAiB,CAACF,GAAG,CAAC/C,CAAC,IAAIA,CAAC,GAAGqC,cAAc,CAAC;QACpDR,MAAM,EAAEE;MACV,CAAC;MACD8B,gBAAgB,EAAE;QAChB/C,IAAI,EAAEuC,aAAa;QACnBV,IAAI,EAAES;MACR,CAAC;MACDE;IACF,CAAC;EACH,CAAC;EAED,OAAO;IACL5E,WAAW;IACXqB,iBAAiB;IACjBwB,mBAAmB;IACnBK,mBAAmB;IACnBI;EACF,CAAC;AACH,CAAC;AAED,MAAM8B,cAAc,GAAGA,CAAC;EAAExH,IAAI;EAAE4F,gBAAgB,GAAG,CAAC;AAAE,CAAC,KAAK;EAAA6B,EAAA;EAC1D,MAAMC,gBAAgB,GAAGxI,MAAM,CAAC,IAAI,CAAC;EACrC,MAAMyI,iBAAiB,GAAGzI,MAAM,CAAC,IAAI,CAAC;EACtC,MAAM0I,qBAAqB,GAAG1I,MAAM,CAAC,IAAI,CAAC;EAC1C,MAAM2I,sBAAsB,GAAG3I,MAAM,CAAC,IAAI,CAAC;EAE3C,MAAM,CAAC4I,sBAAsB,EAAEC,yBAAyB,CAAC,GAAG3I,QAAQ,CAAC,CAAC,CAAC,CAAC;EACxE,MAAM,CAAC4I,uBAAuB,EAAEC,0BAA0B,CAAC,GAAG7I,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC1E,MAAM,CAAC8I,sBAAsB,EAAEC,yBAAyB,CAAC,GAAG/I,QAAQ,CAAC,IAAI,CAAC;EAC1E,MAAM,CAACgJ,UAAU,EAAEC,aAAa,CAAC,GAAGjJ,QAAQ,CAAC,CAAC,CAAC;EAC/C,MAAM,CAACkJ,oBAAoB,EAAEC,uBAAuB,CAAC,GAAGnJ,QAAQ,CAAC,EAAE,CAAC;EACpE,MAAM,CAACoJ,aAAa,EAAEC,gBAAgB,CAAC,GAAGrJ,QAAQ,CAAC,IAAI,CAAC;;EAExD;EACA,MAAMsJ,eAAe,GAAGrJ,OAAO,CAAC,MAAM8C,qBAAqB,CAAC,CAAC,EAAE,EAAE,CAAC;;EAElE;EACAlD,SAAS,CAAC,MAAM;IACd,IAAI,EAACe,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAE2F,OAAO,GAAE;IAEpB,IAAI;MACF,MAAMgD,MAAM,GAAGD,eAAe,CAAChD,cAAc,CAAC1F,IAAI,CAAC2F,OAAO,EAAEC,gBAAgB,CAAC;MAC7E6C,gBAAgB,CAACE,MAAM,CAAC;MACxBJ,uBAAuB,CAACI,MAAM,CAAC3E,aAAa,CAAC;IAC/C,CAAC,CAAC,OAAO4E,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;IACpD;EACF,CAAC,EAAE,CAAC5I,IAAI,EAAE4F,gBAAgB,EAAE8C,eAAe,CAAC,CAAC;EAE7C,MAAMI,UAAU,GAAItF,KAAK,IAAK;IAC5B,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE,OAAO,GAAG;IACzC,OAAOA,KAAK,CAACuF,aAAa,CAAC,CAAC,CAAC;EAC/B,CAAC;EAED,MAAMC,YAAY,GAAIxF,KAAK,IAAK;IAC9B,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE,OAAO,GAAG;IACzC,OAAOA,KAAK,CAACyF,OAAO,CAAC,CAAC,CAAC;EACzB,CAAC;;EAED;EACA,MAAMC,SAAS,GAAG7J,OAAO,CAAC,MAAM;IAC9B,IAAI,CAACmJ,aAAa,IAAI,EAACxI,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAE2F,OAAO,GAAE,OAAO,IAAI;IAEjD,MAAM;MAAEjC,CAAC,EAAEc;IAAK,CAAC,GAAGxE,IAAI,CAAC2F,OAAO;IAChC,MAAM;MACJ2B,eAAe;MACftD,aAAa;MACbmB,WAAW;MACXM,UAAU;MACV8B;IACF,CAAC,GAAGiB,aAAa;;IAEjB;IACA,MAAMW,WAAW,GAAG7B,eAAe,CAACjB,IAAI,CAACI,GAAG,CAACC,GAAG,IAAIA,GAAG,GAAG0B,UAAU,CAAC;IAErE,OAAO;MACLgB,QAAQ,EAAE,CACR;QACEC,KAAK,EAAE,+BAA+B;QACtCrJ,IAAI,EAAEwE,IAAI,CAACiC,GAAG,CAAC,CAAC/C,CAAC,EAAEX,CAAC,MAAM;UAAEjC,CAAC,EAAE4C,CAAC;UAAE3C,CAAC,EAAEoI,WAAW,CAACpG,CAAC;QAAE,CAAC,CAAC,CAAC;QACvDuG,WAAW,EAAE,MAAM;QACnBC,eAAe,EAAE,sBAAsB;QACvCC,OAAO,EAAE,GAAG;QACZC,WAAW,EAAE;MACf,CAAC,EACD;QACEJ,KAAK,EAAE,mCAAmC;QAC1CrJ,IAAI,EAAEwE,IAAI,CAACiC,GAAG,CAAC,CAAC/C,CAAC,EAAEX,CAAC,MAAM;UAAEjC,CAAC,EAAE4C,CAAC;UAAE3C,CAAC,EAAEuG,eAAe,CAACf,MAAM,CAACxD,CAAC;QAAE,CAAC,CAAC,CAAC;QAClEuG,WAAW,EAAE,KAAK;QAClBC,eAAe,EAAE,sBAAsB;QACvCC,OAAO,EAAE,GAAG;QACZC,WAAW,EAAE;MACf,CAAC,EACD;QACEJ,KAAK,EAAE,gBAAgBrF,aAAa,CAAClB,MAAM,SAAS;QACpD9C,IAAI,EAAEgE,aAAa,CAACyC,GAAG,CAACG,CAAC,KAAK;UAAE9F,CAAC,EAAE8F,CAAC,CAACpC,IAAI;UAAEzD,CAAC,EAAE6F,CAAC,CAACpD;QAAM,CAAC,CAAC,CAAC;QACzD8F,WAAW,EAAE,OAAO;QACpBC,eAAe,EAAE,oBAAoB;QACrCE,WAAW,EAAE,CAAC;QACdC,QAAQ,EAAE,KAAK;QACfrJ,kBAAkB,EAAE,IAAI;QACxBc,UAAU,EAAE,CAAC;QACbG,WAAW,EAAE;MACf,CAAC,CACF;MACDqI,SAAS,EAAE,CACT;QACEN,KAAK,EAAE,8BAA8B;QACrCrJ,IAAI,EAAEmF,WAAW,CAACX,IAAI,CAACiC,GAAG,CAAC,CAAC/C,CAAC,EAAEX,CAAC,MAAM;UAAEjC,CAAC,EAAE4C,CAAC;UAAE3C,CAAC,EAAEoE,WAAW,CAACI,MAAM,CAACxC,CAAC;QAAE,CAAC,CAAC,CAAC;QAC1EuG,WAAW,EAAE,OAAO;QACpBC,eAAe,EAAE,sBAAsB;QACvCC,OAAO,EAAE,GAAG;QACZC,WAAW,EAAE;MACf,CAAC,EACD;QACEJ,KAAK,EAAE,+BAA+B;QACtCrJ,IAAI,EAAEuH,gBAAgB,CAAC/C,IAAI,CAACiC,GAAG,CAAC,CAAC/C,CAAC,EAAEX,CAAC,MAAM;UACzCjC,CAAC,EAAE4C,CAAC;UACJ3C,CAAC,EAAE,CAACoI,WAAW,CAACpG,CAAC,CAAC,GAAG,IAAI,GAAG;QAC9B,CAAC,CAAC,CAAC;QACHuG,WAAW,EAAE,QAAQ;QACrBC,eAAe,EAAE,wBAAwB;QACzCC,OAAO,EAAE,GAAG;QACZC,WAAW,EAAE;MACf,CAAC,EACD;QACEJ,KAAK,EAAE,2BAA2B;QAClCrJ,IAAI,EAAEyF,UAAU,CAACjB,IAAI,CAACiC,GAAG,CAAC,CAAC/C,CAAC,EAAEX,CAAC,MAAM;UAAEjC,CAAC,EAAE4C,CAAC;UAAE3C,CAAC,EAAE0E,UAAU,CAACF,MAAM,CAACxC,CAAC;QAAE,CAAC,CAAC,CAAC;QACxEuG,WAAW,EAAE,QAAQ;QACrBC,eAAe,EAAE,wBAAwB;QACzCC,OAAO,EAAE,GAAG;QACZC,WAAW,EAAE;MACf,CAAC,CACF;MACDzF;IACF,CAAC;EACH,CAAC,EAAE,CAACwE,aAAa,EAAExI,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAE2F,OAAO,EAAEyC,UAAU,CAAC,CAAC;;EAE9C;EACAnJ,SAAS,CAAC,MAAM;IACd,IAAI,CAACiK,SAAS,EAAE;IAEhB,MAAMU,YAAY,GAAGA,CAACC,KAAK,EAAEC,MAAM,MAAM;MACvCC,UAAU,EAAE,IAAI;MAChBC,WAAW,EAAE;QACXC,IAAI,EAAE,OAAO;QACbC,SAAS,EAAE;MACb,CAAC;MACDC,MAAM,EAAE;QACNrJ,CAAC,EAAE;UACDsJ,IAAI,EAAE,QAAQ;UACdP,KAAK,EAAE;YACLQ,OAAO,EAAE,IAAI;YACbC,IAAI,EAAE;UACR;QACF,CAAC;QACDvJ,CAAC,EAAE;UACDqJ,IAAI,EAAE,QAAQ;UACdP,KAAK,EAAE;YACLQ,OAAO,EAAE,IAAI;YACbC,IAAI,EAAER;UACR;QACF;MACF,CAAC;MACDS,OAAO,EAAE;QACPV,KAAK,EAAE;UACLQ,OAAO,EAAE,IAAI;UACbC,IAAI,EAAET;QACR,CAAC;QACDW,MAAM,EAAE;UACNH,OAAO,EAAE;QACX,CAAC;QACDI,IAAI,EAAE;UACJC,GAAG,EAAE;YACHC,OAAO,EAAE,IAAI;YACbV,IAAI,EAAE;UACR,CAAC;UACDQ,IAAI,EAAE;YACJG,KAAK,EAAE;cACLD,OAAO,EAAE,IAAI;cACbE,WAAW,EAAE;YACf,CAAC;YACDC,KAAK,EAAE;cACLH,OAAO,EAAE;YACX,CAAC;YACDI,IAAI,EAAE;cACJJ,OAAO,EAAE;YACX,CAAC;YACDV,IAAI,EAAE;UACR;QACF;MACF;IACF,CAAC,CAAC;;IAEF;IACA,IAAIrC,qBAAqB,CAACoD,OAAO,EAAE;MACjCpD,qBAAqB,CAACoD,OAAO,CAACC,OAAO,CAAC,CAAC;IACzC;IACA,IAAIpD,sBAAsB,CAACmD,OAAO,EAAE;MAClCnD,sBAAsB,CAACmD,OAAO,CAACC,OAAO,CAAC,CAAC;IAC1C;;IAEA;IACA,IAAIvD,gBAAgB,CAACsD,OAAO,EAAE;MAC5B,MAAMjL,GAAG,GAAG2H,gBAAgB,CAACsD,OAAO,CAACE,UAAU,CAAC,IAAI,CAAC;MACrDtD,qBAAqB,CAACoD,OAAO,GAAG,IAAI1L,KAAK,CAACS,GAAG,EAAE;QAC7CqK,IAAI,EAAE,MAAM;QACZpK,IAAI,EAAE;UACJC,QAAQ,EAAEiJ,SAAS,CAACE;QACtB,CAAC;QACD9G,OAAO,EAAEsH,YAAY,CAAC,kCAAkC,EAAE,YAAY;MACxE,CAAC,CAAC;IACJ;IAEA,IAAIjC,iBAAiB,CAACqD,OAAO,EAAE;MAC7B,MAAMjL,GAAG,GAAG4H,iBAAiB,CAACqD,OAAO,CAACE,UAAU,CAAC,IAAI,CAAC;MACtDrD,sBAAsB,CAACmD,OAAO,GAAG,IAAI1L,KAAK,CAACS,GAAG,EAAE;QAC9CqK,IAAI,EAAE,MAAM;QACZpK,IAAI,EAAE;UACJC,QAAQ,EAAEiJ,SAAS,CAACS;QACtB,CAAC;QACDrH,OAAO,EAAEsH,YAAY,CAAC,sBAAsB,EAAE,QAAQ;MACxD,CAAC,CAAC;IACJ;IAEA,OAAO,MAAM;MAAA,IAAAuB,qBAAA,EAAAC,qBAAA;MACX,CAAAD,qBAAA,GAAAvD,qBAAqB,CAACoD,OAAO,cAAAG,qBAAA,uBAA7BA,qBAAA,CAA+BF,OAAO,CAAC,CAAC;MACxC,CAAAG,qBAAA,GAAAvD,sBAAsB,CAACmD,OAAO,cAAAI,qBAAA,uBAA9BA,qBAAA,CAAgCH,OAAO,CAAC,CAAC;IAC3C,CAAC;EACH,CAAC,EAAE,CAAC/B,SAAS,CAAC,CAAC;;EAEf;EACAjK,SAAS,CAAC,MAAM;IACd,IAAIiK,SAAS,aAATA,SAAS,eAATA,SAAS,CAAEE,QAAQ,EAAE;MACvB,MAAMiC,aAAa,GAAG,CAAC,CAAC;MACxBnC,SAAS,CAACE,QAAQ,CAAClJ,OAAO,CAAEC,OAAO,IAAK;QACtCkL,aAAa,CAAClL,OAAO,CAACkJ,KAAK,CAAC,GAAG,IAAI;MACrC,CAAC,CAAC;MACFtB,yBAAyB,CAACsD,aAAa,CAAC;IAC1C;IAEA,IAAInC,SAAS,aAATA,SAAS,eAATA,SAAS,CAAES,SAAS,EAAE;MACxB,MAAM0B,aAAa,GAAG,CAAC,CAAC;MACxBnC,SAAS,CAACS,SAAS,CAACzJ,OAAO,CAAEC,OAAO,IAAK;QACvCkL,aAAa,CAAClL,OAAO,CAACkJ,KAAK,CAAC,GAAG,IAAI;MACrC,CAAC,CAAC;MACFpB,0BAA0B,CAACoD,aAAa,CAAC;IAC3C;EACF,CAAC,EAAE,CAACnC,SAAS,CAAC,CAAC;EAEf,MAAMoC,mBAAmB,GAAGnM,WAAW,CAAC,MAAM;IAAA,IAAAoM,sBAAA;IAC5C,CAAAA,sBAAA,GAAA3D,qBAAqB,CAACoD,OAAO,cAAAO,sBAAA,uBAA7BA,sBAAA,CAA+BC,SAAS,CAAC,CAAC;EAC5C,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,oBAAoB,GAAGtM,WAAW,CAAC,MAAM;IAAA,IAAAuM,sBAAA;IAC7C,CAAAA,sBAAA,GAAA7D,sBAAsB,CAACmD,OAAO,cAAAU,sBAAA,uBAA9BA,sBAAA,CAAgCF,SAAS,CAAC,CAAC;EAC7C,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMG,SAAS,GAAGxM,WAAW,CAAC,CAACyM,QAAQ,EAAEC,MAAM,KAAK;IAAA,IAAAC,iBAAA;IAClD,CAAAA,iBAAA,GAAAF,QAAQ,CAACZ,OAAO,cAAAc,iBAAA,uBAAhBA,iBAAA,CAAkBrB,IAAI,CAAC;MAAE3J,CAAC,EAAE+K,MAAM;MAAE9K,CAAC,EAAE8K;IAAO,CAAC,CAAC;EAClD,CAAC,EAAE,EAAE,CAAC;EAEN,MAAME,oBAAoB,GAAG5M,WAAW,CAAC,MAAM;IAC7CwM,SAAS,CAAC/D,qBAAqB,EAAE1F,SAAS,CAAC;EAC7C,CAAC,EAAE,CAACyJ,SAAS,CAAC,CAAC;EAEf,MAAMK,qBAAqB,GAAG7M,WAAW,CAAC,MAAM;IAC9CwM,SAAS,CAAC/D,qBAAqB,EAAE,CAAC,GAAG1F,SAAS,CAAC;EACjD,CAAC,EAAE,CAACyJ,SAAS,CAAC,CAAC;EAEf,MAAMM,qBAAqB,GAAG9M,WAAW,CAAC,MAAM;IAC9CwM,SAAS,CAAC9D,sBAAsB,EAAE3F,SAAS,CAAC;EAC9C,CAAC,EAAE,CAACyJ,SAAS,CAAC,CAAC;EAEf,MAAMO,sBAAsB,GAAG/M,WAAW,CAAC,MAAM;IAC/CwM,SAAS,CAAC9D,sBAAsB,EAAE,CAAC,GAAG3F,SAAS,CAAC;EAClD,CAAC,EAAE,CAACyJ,SAAS,CAAC,CAAC;EAEf,MAAMQ,gBAAgB,GAAGhN,WAAW,CAClC,CAACiN,gBAAgB,EAAE/C,KAAK,EAAEgD,eAAe,EAAEC,kBAAkB,KAAK;IAAA,IAAAC,qBAAA;IAChE,MAAMvB,OAAO,IAAAuB,qBAAA,GAAGF,eAAe,CAAChD,KAAK,CAAC,cAAAkD,qBAAA,cAAAA,qBAAA,GAAI,IAAI;IAC9C,MAAMC,IAAI,GAAG,CAACxB,OAAO;IAErBsB,kBAAkB,CAAEG,IAAI,KAAM;MAC5B,GAAGA,IAAI;MACP,CAACpD,KAAK,GAAGmD;IACX,CAAC,CAAC,CAAC;IAEH,MAAM1M,KAAK,GAAGsM,gBAAgB,CAACpB,OAAO;IACtC,IAAI,CAAClL,KAAK,EAAE;IAEZ,MAAMM,YAAY,GAAGN,KAAK,CAACE,IAAI,CAACC,QAAQ,CAACyM,SAAS,CAC/CvM,OAAO,IAAKA,OAAO,CAACkJ,KAAK,KAAKA,KACjC,CAAC;IAED,IAAIjJ,YAAY,KAAK,CAAC,CAAC,EAAE;IAEzBN,KAAK,CAAC6M,oBAAoB,CAACvM,YAAY,EAAEoM,IAAI,CAAC;IAC9C1M,KAAK,CAAC8M,MAAM,CAAC,MAAM,CAAC;EACtB,CAAC,EACD,EACF,CAAC;EAED,MAAMC,wBAAwB,GAAG1N,WAAW,CAAC,MAAM;IACjD,MAAMqN,IAAI,GAAG,CAACtE,sBAAsB;IACpCC,yBAAyB,CAACqE,IAAI,CAAC;IAE/B,MAAM1M,KAAK,GAAG8H,qBAAqB,CAACoD,OAAO;IAC3C,IAAI,CAAClL,KAAK,EAAE;IAEZ,MAAMM,YAAY,GAAGN,KAAK,CAACE,IAAI,CAACC,QAAQ,CAACyM,SAAS,CAC/CvM,OAAO,IAAKA,OAAO,CAACE,kBACvB,CAAC;IAED,IAAID,YAAY,KAAK,CAAC,CAAC,EAAE;IAEzBN,KAAK,CAAC6M,oBAAoB,CAACvM,YAAY,EAAEoM,IAAI,CAAC;IAC9C1M,KAAK,CAAC8M,MAAM,CAAC,MAAM,CAAC;EACtB,CAAC,EAAE,CAAC1E,sBAAsB,CAAC,CAAC;EAE5B,MAAM4E,mBAAmB,GAAGzN,OAAO,CAAC,MAAM;IAAA,IAAA0N,mBAAA;IACxC,OAAO,EAAAA,mBAAA,GAAC7D,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEE,QAAQ,cAAA2D,mBAAA,cAAAA,mBAAA,GAAI,EAAE,EAC9BC,MAAM,CAAE7M,OAAO,IAAK,CAACA,OAAO,CAACE,kBAAkB,CAAC,CAChDoG,GAAG,CAAEtG,OAAO,KAAM;MACjBkJ,KAAK,EAAElJ,OAAO,CAACkJ,KAAK;MACpB4D,KAAK,EAAE9M,OAAO,CAACmJ;IACjB,CAAC,CAAC,CAAC;EACP,CAAC,EAAE,CAACJ,SAAS,CAAC,CAAC;EAEf,MAAMgE,oBAAoB,GAAG7N,OAAO,CAAC,MAAM;IAAA,IAAA8N,oBAAA;IACzC,OAAO,EAAAA,oBAAA,GAACjE,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAES,SAAS,cAAAwD,oBAAA,cAAAA,oBAAA,GAAI,EAAE,EAAE1G,GAAG,CAAEtG,OAAO,KAAM;MACpDkJ,KAAK,EAAElJ,OAAO,CAACkJ,KAAK;MACpB4D,KAAK,EAAE9M,OAAO,CAACmJ;IACjB,CAAC,CAAC,CAAC;EACL,CAAC,EAAE,CAACJ,SAAS,CAAC,CAAC;EAEf,MAAMkE,WAAW,GAAG/N,OAAO,CAAC,MAAM;IAAA,IAAAgO,aAAA;IAChC,IAAI,EAACrN,IAAI,aAAJA,IAAI,gBAAAqN,aAAA,GAAJrN,IAAI,CAAE2F,OAAO,cAAA0H,aAAA,eAAbA,aAAA,CAAehH,IAAI,GAAE;MACxB,OAAO;QAAEpC,GAAG,EAAE,CAAC,CAAC;QAAEqJ,GAAG,EAAE,CAAC;QAAEC,IAAI,EAAE;MAAM,CAAC;IACzC;IACA,MAAMhI,MAAM,GAAGvF,IAAI,CAAC2F,OAAO,CAACU,IAAI;IAChC,MAAMmH,KAAK,GAAGvK,IAAI,CAACqK,GAAG,CAAC,GAAG/H,MAAM,CAAC,GAAGtC,IAAI,CAACgB,GAAG,CAAC,GAAGsB,MAAM,CAAC;IACvD,OAAO;MACLtB,GAAG,EAAE,CAACuJ,KAAK;MACXF,GAAG,EAAEE,KAAK;MACVD,IAAI,EAAEC,KAAK,GAAG;IAChB,CAAC;EACH,CAAC,EAAE,CAACxN,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAE2F,OAAO,CAAC,CAAC;EAEnB,MAAM8H,QAAQ,GAAGpO,OAAO,CAAC,MAAM;IAC7B,IAAIiJ,oBAAoB,CAACxF,MAAM,KAAK,CAAC,EAAE,OAAO,CAAC;IAC/C,MAAM4K,GAAG,GAAGpF,oBAAoB,CAACqF,MAAM,CAAC,CAACC,GAAG,EAAEC,KAAK,KAAKD,GAAG,GAAGC,KAAK,CAACrK,KAAK,EAAE,CAAC,CAAC;IAC7E,OAAOkK,GAAG,GAAGpF,oBAAoB,CAACxF,MAAM;EAC1C,CAAC,EAAE,CAACwF,oBAAoB,CAAC,CAAC;EAE1B,oBACE5I,OAAA;IAAKoO,SAAS,EAAC,gBAAgB;IAAAC,QAAA,GAC5B,CAAA/N,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAE2F,OAAO,kBACZjG,OAAA;MAAKoO,SAAS,EAAC,qBAAqB;MAAAC,QAAA,gBAClCrO,OAAA;QAAOsO,OAAO,EAAC,mBAAmB;QAACF,SAAS,EAAC,mBAAmB;QAAAC,QAAA,EAAC;MAEjE;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eACR1O,OAAA;QAAKoO,SAAS,EAAC,yBAAyB;QAAAC,QAAA,gBACtCrO,OAAA;UACEE,EAAE,EAAC,mBAAmB;UACtBwK,IAAI,EAAC,OAAO;UACZnG,GAAG,EAAEmJ,WAAW,CAACnJ,GAAI;UACrBqJ,GAAG,EAAEF,WAAW,CAACE,GAAI;UACrBC,IAAI,EAAEH,WAAW,CAACG,IAAK;UACvB/J,KAAK,EAAE4E,UAAW;UAClBiG,QAAQ,EAAGC,CAAC,IAAKjG,aAAa,CAACkG,UAAU,CAACD,CAAC,CAACE,MAAM,CAAChL,KAAK,CAAC,CAAE;UAC3DsK,SAAS,EAAC;QAAoB;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC/B,CAAC,eACF1O,OAAA;UACE0K,IAAI,EAAC,QAAQ;UACbnG,GAAG,EAAEmJ,WAAW,CAACnJ,GAAI;UACrBqJ,GAAG,EAAEF,WAAW,CAACE,GAAI;UACrBC,IAAI,EAAEH,WAAW,CAACG,IAAK;UACvB/J,KAAK,EAAE4E,UAAW;UAClBiG,QAAQ,EAAGC,CAAC,IACVjG,aAAa,CAACkG,UAAU,CAACD,CAAC,CAACE,MAAM,CAAChL,KAAK,CAAC,IAAI,CAAC,CAC9C;UACDsK,SAAS,EAAC;QAAoB;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC/B,CAAC,eACF1O,OAAA;UACE0K,IAAI,EAAC,QAAQ;UACb0D,SAAS,EAAC,uBAAuB;UACjCW,OAAO,EAAEA,CAAA,KAAMpG,aAAa,CAAC,CAAC,CAAE;UAChC,cAAW,iFAAgB;UAAA0F,QAAA,EAC5B;QAED;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN,eAED1O,OAAA;MAASoO,SAAS,EAAC,eAAe;MAAAC,QAAA,gBAChCrO,OAAA;QAAKoO,SAAS,EAAC,sBAAsB;QAAAC,QAAA,eACnCrO,OAAA;UAAKoO,SAAS,EAAC,eAAe;UAACY,IAAI,EAAC,OAAO;UAAC,cAAW,qHAAsB;UAAAX,QAAA,gBAC3ErO,OAAA;YACE0K,IAAI,EAAC,QAAQ;YACb0D,SAAS,EAAC,kBAAkB;YAC5BW,OAAO,EAAEzC,qBAAsB;YAC/B,cAAW,mGAAmB;YAAA+B,QAAA,EAC/B;UAED;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACT1O,OAAA;YACE0K,IAAI,EAAC,QAAQ;YACb0D,SAAS,EAAC,kBAAkB;YAC5BW,OAAO,EAAE1C,oBAAqB;YAC9B,cAAW,mGAAmB;YAAAgC,QAAA,EAC/B;UAED;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACT1O,OAAA;YACE0K,IAAI,EAAC,QAAQ;YACb0D,SAAS,EAAC,gBAAgB;YAC1BW,OAAO,EAAEnD,mBAAoB;YAC7B,cAAW,6FAAkB;YAAAyC,QAAA,EAC9B;UAED;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,EAELtB,mBAAmB,CAAChK,MAAM,GAAG,CAAC,iBAC7BpD,OAAA;QAAKoO,SAAS,EAAC,mBAAmB;QAACY,IAAI,EAAC,OAAO;QAAC,cAAW,+LAAoC;QAAAX,QAAA,GAC5FjB,mBAAmB,CAACrG,GAAG,CAAC,CAAC;UAAE4C,KAAK;UAAE4D;QAAM,CAAC,KAAK;UAAA,IAAA0B,qBAAA;UAC7C,MAAMC,QAAQ,IAAAD,qBAAA,GAAG7G,sBAAsB,CAACuB,KAAK,CAAC,cAAAsF,qBAAA,cAAAA,qBAAA,GAAI,IAAI;UACtD,oBACEjP,OAAA;YAEE0K,IAAI,EAAC,QAAQ;YACb0D,SAAS,EAAE,mBAAmBc,QAAQ,GAAG,yBAAyB,GAAG,EAAE,EAAG;YAC1EH,OAAO,EAAEA,CAAA,KACPtC,gBAAgB,CACdvE,qBAAqB,EACrByB,KAAK,EACLvB,sBAAsB,EACtBC,yBACF,CACD;YACD,gBAAc6G,QAAS;YAAAb,QAAA,gBAEvBrO,OAAA;cACEoO,SAAS,EAAC,4BAA4B;cACtCe,KAAK,EAAE;gBACLvF,WAAW,EAAE2D,KAAK;gBAClB1D,eAAe,EAAEqF,QAAQ,GAAG3B,KAAK,GAAG;cACtC,CAAE;cACF,eAAY;YAAM;cAAAgB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACnB,CAAC,eACF1O,OAAA;cAAMoO,SAAS,EAAC,wBAAwB;cAAAC,QAAA,EAAE1E;YAAK;cAAA4E,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC;UAAA,GArBlD/E,KAAK;YAAA4E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAsBJ,CAAC;QAEb,CAAC,CAAC,eACF1O,OAAA;UACE0K,IAAI,EAAC,QAAQ;UACb0D,SAAS,EAAE,mBAAmB5F,sBAAsB,GAAG,yBAAyB,GAAG,EAAE,EAAG;UACxFuG,OAAO,EAAE5B,wBAAyB;UAClC,gBAAc3E,sBAAuB;UAAA6F,QAAA,gBAErCrO,OAAA;YACEoO,SAAS,EAAC,4BAA4B;YACtCe,KAAK,EAAE;cACLvF,WAAW,EAAE,SAAS;cACtBC,eAAe,EAAErB,sBAAsB,GAAG,SAAS,GAAG;YACxD,CAAE;YACF,eAAY;UAAM;YAAA+F,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACnB,CAAC,eACF1O,OAAA;YAAMoO,SAAS,EAAC,wBAAwB;YAAAC,QAAA,EAAC;UAEzC;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CACN,eACD1O,OAAA;QAAQoP,GAAG,EAAEpH,gBAAiB;QAACtE,KAAK,EAAC,KAAK;QAAC2L,MAAM,EAAC;MAAK;QAAAd,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAS,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC1D,CAAC,eAEV1O,OAAA;MAASoO,SAAS,EAAC,eAAe;MAAAC,QAAA,gBAChCrO,OAAA;QAAKoO,SAAS,EAAC,sBAAsB;QAAAC,QAAA,eACnCrO,OAAA;UAAKoO,SAAS,EAAC,eAAe;UAACY,IAAI,EAAC,OAAO;UAAC,cAAW,qHAAsB;UAAAX,QAAA,gBAC3ErO,OAAA;YACE0K,IAAI,EAAC,QAAQ;YACb0D,SAAS,EAAC,kBAAkB;YAC5BW,OAAO,EAAEvC,sBAAuB;YAChC,cAAW,mGAAmB;YAAA6B,QAAA,EAC/B;UAED;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACT1O,OAAA;YACE0K,IAAI,EAAC,QAAQ;YACb0D,SAAS,EAAC,kBAAkB;YAC5BW,OAAO,EAAExC,qBAAsB;YAC/B,cAAW,mGAAmB;YAAA8B,QAAA,EAC/B;UAED;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACT1O,OAAA;YACE0K,IAAI,EAAC,QAAQ;YACb0D,SAAS,EAAC,gBAAgB;YAC1BW,OAAO,EAAEhD,oBAAqB;YAC9B,cAAW,6FAAkB;YAAAsC,QAAA,EAC9B;UAED;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,EAELlB,oBAAoB,CAACpK,MAAM,GAAG,CAAC,iBAC9BpD,OAAA;QAAKoO,SAAS,EAAC,mBAAmB;QAACY,IAAI,EAAC,OAAO;QAAC,cAAW,uNAAwC;QAAAX,QAAA,EAChGb,oBAAoB,CAACzG,GAAG,CAAC,CAAC;UAAE4C,KAAK;UAAE4D;QAAM,CAAC,KAAK;UAAA,IAAA+B,qBAAA;UAC9C,MAAMJ,QAAQ,IAAAI,qBAAA,GAAGhH,uBAAuB,CAACqB,KAAK,CAAC,cAAA2F,qBAAA,cAAAA,qBAAA,GAAI,IAAI;UACvD,oBACEtP,OAAA;YAEE0K,IAAI,EAAC,QAAQ;YACb0D,SAAS,EAAE,mBAAmBc,QAAQ,GAAG,yBAAyB,GAAG,EAAE,EAAG;YAC1EH,OAAO,EAAEA,CAAA,KACPtC,gBAAgB,CACdtE,sBAAsB,EACtBwB,KAAK,EACLrB,uBAAuB,EACvBC,0BACF,CACD;YACD,gBAAc2G,QAAS;YAAAb,QAAA,gBAEvBrO,OAAA;cACEoO,SAAS,EAAC,4BAA4B;cACtCe,KAAK,EAAE;gBACLvF,WAAW,EAAE2D,KAAK;gBAClB1D,eAAe,EAAEqF,QAAQ,GAAG3B,KAAK,GAAG;cACtC,CAAE;cACF,eAAY;YAAM;cAAAgB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACnB,CAAC,eACF1O,OAAA;cAAMoO,SAAS,EAAC,wBAAwB;cAAAC,QAAA,EAAE1E;YAAK;cAAA4E,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC;UAAA,GArBlD/E,KAAK;YAAA4E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAsBJ,CAAC;QAEb,CAAC;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CACN,eACD1O,OAAA;QAAQoP,GAAG,EAAEnH,iBAAkB;QAACvE,KAAK,EAAC,KAAK;QAAC2L,MAAM,EAAC;MAAK;QAAAd,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAS,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC3D,CAAC,EAET9F,oBAAoB,CAACxF,MAAM,GAAG,CAAC,iBAC9BpD,OAAA;MAAOoO,SAAS,EAAC,oBAAoB;MAAAC,QAAA,gBACnCrO,OAAA;QAAKoO,SAAS,EAAC,4BAA4B;QAAAC,QAAA,gBACzCrO,OAAA;UAAMoO,SAAS,EAAC,kCAAkC;UAAAC,QAAA,GAAC,+DACtC,EAACzF,oBAAoB,CAACxF,MAAM,EAAC,qEAC1C;QAAA;UAAAmL,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eACP1O,OAAA;UAAAqO,QAAA,GAAG,iGAAoB,EAACN,QAAQ,CAACxE,OAAO,CAAC,CAAC,CAAC;QAAA;UAAAgF,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC7C,CAAC,eACN1O,OAAA;QAAKoO,SAAS,EAAC,4BAA4B;QAAAC,QAAA,eACzCrO,OAAA;UAAOoO,SAAS,EAAC,oBAAoB;UAAAC,QAAA,gBACnCrO,OAAA;YAAAqO,QAAA,eACErO,OAAA;cAAAqO,QAAA,gBACErO,OAAA;gBAAAqO,QAAA,EAAI;cAAC;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACV1O,OAAA;gBAAAqO,QAAA,EAAI;cAAS;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAClB1O,OAAA;gBAAAqO,QAAA,EAAI;cAAa;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACpB;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA,CAAC,eACR1O,OAAA;YAAAqO,QAAA,EACGzF,oBAAoB,CAAC7B,GAAG,CAAC,CAACoH,KAAK,EAAEoB,GAAG,kBACnCvP,OAAA;cAAAqO,QAAA,gBACErO,OAAA;gBAAAqO,QAAA,EAAKkB,GAAG,GAAG;cAAC;gBAAAhB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,eAClB1O,OAAA;gBAAAqO,QAAA,EAAKjF,UAAU,CAAC+E,KAAK,CAACrJ,IAAI;cAAC;gBAAAyJ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,eACjC1O,OAAA;gBAAAqO,QAAA,EAAK/E,YAAY,CAAC6E,KAAK,CAACrK,KAAK;cAAC;gBAAAyK,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC;YAAA,GAH7B,GAAGP,KAAK,CAACrJ,IAAI,IAAIyK,GAAG,EAAE;cAAAhB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAI3B,CACL;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACG,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACD,CACR;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAAC3G,EAAA,CA9iBID,cAAc;AAAA0H,EAAA,GAAd1H,cAAc;AAgjBpB,eAAeA,cAAc;AAAC,IAAA0H,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}