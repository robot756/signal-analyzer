{"ast":null,"code":"export const processCSVData = file => {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = e => {\n      try {\n        const csvText = e.target.result;\n        const results = parseCSV(csvText);\n        resolve(results);\n      } catch (error) {\n        reject(error);\n      }\n    };\n    reader.onerror = () => reject(new Error(\"Ошибка чтения файла\"));\n    reader.readAsText(file);\n  });\n};\nconst removeBaseline = (arr, N = 2000) => {\n  const count = Math.min(arr.length, N);\n  const avg = arr.slice(0, count).reduce((s, v) => s + v, 0) / count;\n  return arr.map(v => v - avg);\n};\nconst parseCSV = csvText => {\n  const lines = csvText.split(\"\\n\");\n  const t = [];\n  const tenz = [];\n  const interf = [];\n  let dataStarted = false;\n  let lineCount = 0;\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i].trim();\n    if (!line) continue;\n    if (line.startsWith(\"TIME,CH1,\")) {\n      dataStarted = true;\n      continue;\n    }\n    if (dataStarted) {\n      lineCount++;\n      if (lineCount < 6650) continue;\n      if (lineCount > 27000) break;\n      const fields = line.split(\",\");\n      if (fields.length >= 5) {\n        const timeVal = parseFloat(fields[0]);\n        const ch1Val = parseFloat(fields[1]);\n        const ch3Val = parseFloat(fields[3]);\n        if (!isNaN(timeVal) && !isNaN(ch1Val) && !isNaN(ch3Val)) {\n          t.push(timeVal);\n          tenz.push(ch1Val * 0.00132 * 1.25);\n          interf.push(ch3Val + 0.04);\n        }\n      }\n    }\n  }\n  const interfCorrected = removeBaseline(interf);\n  const {\n    t0,\n    y0\n  } = findZeroCrossings(t, interfCorrected);\n  const {\n    filteredT0,\n    filteredY0\n  } = filterClosePoints(t0, y0, 100e-9);\n  const {\n    u_interf,\n    dudt_interf\n  } = calculateDerivative(filteredT0);\n  const intersectionPoints = findSignalIntersectionsAtZero(t, tenz, interfCorrected);\n  return {\n    t,\n    tenz,\n    interf,\n    interfCorrected,\n    t0: filteredT0,\n    y0: filteredY0,\n    u_interf,\n    dudt_interf,\n    intersectionPoints\n  };\n};\nconst findZeroCrossings = (t, interf, eps = 1e-6) => {\n  const t0 = [];\n  const y0 = [];\n  for (let i = 1; i < interf.length; i++) {\n    const y1 = interf[i - 1];\n    const y2 = interf[i];\n    const x1 = t[i - 1];\n    const x2 = t[i];\n    if (Math.abs(y1) < eps) {\n      t0.push(x1);\n      y0.push(0);\n      continue;\n    }\n    if (Math.abs(y2) < eps) {\n      t0.push(x2);\n      y0.push(0);\n      continue;\n    }\n    if (Math.abs(y1) < eps && Math.abs(y2) < eps) {\n      t0.push((x1 + x2) / 2);\n      y0.push(0);\n      continue;\n    }\n    if (y1 * y2 < 0) {\n      const t_zero = x1 - y1 * (x2 - x1) / (y2 - y1);\n      t0.push(t_zero);\n      y0.push(0);\n    }\n  }\n  return {\n    t0,\n    y0\n  };\n};\nconst filterClosePoints = (t0, y0, minDistance) => {\n  if (t0.length <= 1) {\n    return {\n      filteredT0: t0,\n      filteredY0: y0\n    };\n  }\n  let filteredT0 = [...t0];\n  let filteredY0 = [...y0];\n  for (let k = 0; k < 10; k++) {\n    const newT0 = [filteredT0[0]];\n    const newY0 = [filteredY0[0]];\n    for (let i = 1; i < filteredT0.length; i++) {\n      if (filteredT0[i] - newT0[newT0.length - 1] >= minDistance) {\n        newT0.push(filteredT0[i]);\n        newY0.push(filteredY0[i]);\n      }\n    }\n    if (newT0.length === filteredT0.length) break;\n    filteredT0 = newT0;\n    filteredY0 = newY0;\n  }\n  return {\n    filteredT0,\n    filteredY0\n  };\n};\nconst calculateDerivative = t0 => {\n  const u_interf = [];\n  const dudt_interf = [];\n  for (let i = 0; i < t0.length; i++) {\n    if (i === 0) {\n      u_interf[i] = 0.63 / 4 * 1e-6;\n      dudt_interf[i] = 0;\n    } else {\n      u_interf[i] = u_interf[i - 1] + 0.63 / 4 * 1e-6;\n      const du_interf = u_interf[i] - u_interf[i - 1];\n      const dt_interf = t0[i] - t0[i - 1];\n      dudt_interf[i] = dt_interf !== 0 ? du_interf / dt_interf : 0;\n    }\n  }\n  return {\n    u_interf,\n    dudt_interf\n  };\n};\nconst findSignalIntersectionsAtZero = (t, tenz, interf, yThreshold = 0.02) => {\n  const intersections = [];\n  for (let i = 1; i < t.length; i++) {\n    const diffPrev = tenz[i - 1] - interf[i - 1];\n    const diffCurr = tenz[i] - interf[i];\n    if (diffPrev <= 0 && diffCurr > 0 || diffPrev >= 0 && diffCurr < 0) {\n      const t1 = t[i - 1];\n      const t2 = t[i];\n      const diffDelta = diffCurr - diffPrev;\n      if (diffDelta === 0) continue;\n      const ratio = -diffPrev / diffDelta;\n      const time = t1 + ratio * (t2 - t1);\n      const tenzValue = tenz[i - 1] + ratio * (tenz[i] - tenz[i - 1]);\n      const interfValue = interf[i - 1] + ratio * (interf[i] - interf[i - 1]);\n      const value = (tenzValue + interfValue) / 2;\n      if (Math.abs(value) <= yThreshold) {\n        intersections.push({\n          time,\n          value\n        });\n      }\n    }\n  }\n  return intersections;\n};\nexport const generateChartData = results => {\n  const {\n    t,\n    tenz,\n    interfCorrected,\n    t0,\n    dudt_interf,\n    intersectionPoints\n  } = results;\n  const step = Math.max(1, Math.floor(t.length / 2000));\n  const limitedT = [];\n  const limitedTenz = [];\n  const limitedInterf = [];\n  for (let i = 0; i < t.length; i += step) {\n    limitedT.push(t[i]);\n    limitedTenz.push(tenz[i]);\n    limitedInterf.push(interfCorrected[i]);\n  }\n  const chartData = {\n    original: [{\n      label: \"Тензометрический сигнал (CH1)\",\n      data: limitedT.map((time, idx) => ({\n        x: time,\n        y: limitedTenz[idx]\n      })),\n      borderColor: \"rgb(255, 99, 132)\",\n      backgroundColor: \"rgba(255, 99, 132, 0.1)\",\n      borderWidth: 1,\n      tension: 0.1\n    }, {\n      label: \"Интерферометрический сигнал (CH3, центрированный)\",\n      data: limitedT.map((time, idx) => ({\n        x: time,\n        y: limitedInterf[idx]\n      })),\n      borderColor: \"rgb(54, 162, 235)\",\n      backgroundColor: \"rgba(54, 162, 235, 0.1)\",\n      borderWidth: 1,\n      tension: 0.1\n    }],\n    processed: [{\n      label: \"Производная интерферометрического сигнала\",\n      data: t0.map((time, idx) => ({\n        x: time - 51.5e-6,\n        y: dudt_interf[idx]\n      })),\n      borderColor: \"rgb(75, 192, 192)\",\n      backgroundColor: \"rgba(75, 192, 192, 0.1)\",\n      borderWidth: 2,\n      pointRadius: 2,\n      showLine: true\n    }, {\n      label: \"Скорректированный тензосигнал\",\n      data: limitedT.map((time, idx) => ({\n        x: time + 50e-6,\n        y: -limitedTenz[idx] * 5000 + 0.38\n      })),\n      borderColor: \"rgb(153, 102, 255)\",\n      backgroundColor: \"rgba(153, 102, 255, 0.1)\",\n      borderWidth: 1,\n      tension: 0.1\n    }]\n  };\n  if (intersectionPoints.length) {\n    chartData.original.push({\n      label: \"Пересечения при Y=0\",\n      data: intersectionPoints.map(({\n        time,\n        value\n      }) => ({\n        x: time,\n        y: value\n      })),\n      showLine: false,\n      pointStyle: \"crossRot\",\n      pointRadius: 0,\n      pointHoverRadius: 0,\n      borderWidth: 0,\n      order: 99,\n      z: 50,\n      intersectionMarker: true,\n      markerSize: 4,\n      markerColor: \"#000000\",\n      markerAlpha: 0.7,\n      markerLineWidth: 2\n    });\n  }\n  chartData.intersections = intersectionPoints;\n  chartData.rawData = {\n    t: limitedT,\n    tenz: limitedTenz,\n    interf: limitedInterf,\n    fullT: t,\n    fullTenz: tenz,\n    fullInterf: interfCorrected,\n    t0,\n    dudt_interf\n  };\n  return chartData;\n};","map":{"version":3,"names":["processCSVData","file","Promise","resolve","reject","reader","FileReader","onload","e","csvText","target","result","results","parseCSV","error","onerror","Error","readAsText","removeBaseline","arr","N","count","Math","min","length","avg","slice","reduce","s","v","map","lines","split","t","tenz","interf","dataStarted","lineCount","i","line","trim","startsWith","fields","timeVal","parseFloat","ch1Val","ch3Val","isNaN","push","interfCorrected","t0","y0","findZeroCrossings","filteredT0","filteredY0","filterClosePoints","u_interf","dudt_interf","calculateDerivative","intersectionPoints","findSignalIntersectionsAtZero","eps","y1","y2","x1","x2","abs","t_zero","minDistance","k","newT0","newY0","du_interf","dt_interf","yThreshold","intersections","diffPrev","diffCurr","t1","t2","diffDelta","ratio","time","tenzValue","interfValue","value","generateChartData","step","max","floor","limitedT","limitedTenz","limitedInterf","chartData","original","label","data","idx","x","y","borderColor","backgroundColor","borderWidth","tension","processed","pointRadius","showLine","pointStyle","pointHoverRadius","order","z","intersectionMarker","markerSize","markerColor","markerAlpha","markerLineWidth","rawData","fullT","fullTenz","fullInterf"],"sources":["C:/Users/Иван/Desktop/signal-analyzer/src/csvProcessor.js"],"sourcesContent":["export const processCSVData = (file) => {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n\n    reader.onload = (e) => {\n      try {\n        const csvText = e.target.result;\n        const results = parseCSV(csvText);\n        resolve(results);\n      } catch (error) {\n        reject(error);\n      }\n    };\n\n    reader.onerror = () => reject(new Error(\"Ошибка чтения файла\"));\n    reader.readAsText(file);\n  });\n};\n\nconst removeBaseline = (arr, N = 2000) => {\n  const count = Math.min(arr.length, N);\n  const avg = arr.slice(0, count).reduce((s, v) => s + v, 0) / count;\n  return arr.map(v => v - avg);\n};\n\nconst parseCSV = (csvText) => {\n  const lines = csvText.split(\"\\n\");\n  const t = [];\n  const tenz = [];\n  const interf = [];\n\n  let dataStarted = false;\n  let lineCount = 0;\n\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i].trim();\n    if (!line) continue;\n\n    if (line.startsWith(\"TIME,CH1,\")) {\n      dataStarted = true;\n      continue;\n    }\n\n    if (dataStarted) {\n      lineCount++;\n\n      if (lineCount < 6650) continue;\n      if (lineCount > 27000) break;\n\n      const fields = line.split(\",\");\n\n      if (fields.length >= 5) {\n        const timeVal = parseFloat(fields[0]);\n        const ch1Val = parseFloat(fields[1]);\n        const ch3Val = parseFloat(fields[3]);\n\n        if (!isNaN(timeVal) && !isNaN(ch1Val) && !isNaN(ch3Val)) {\n          t.push(timeVal);\n          tenz.push(ch1Val * 0.00132 * 1.25);\n          interf.push(ch3Val + 0.04);\n        }\n      }\n    }\n  }\n\n  const interfCorrected = removeBaseline(interf);\n\n  const { t0, y0 } = findZeroCrossings(t, interfCorrected);\n  const { filteredT0, filteredY0 } = filterClosePoints(t0, y0, 100e-9);\n  const { u_interf, dudt_interf } = calculateDerivative(filteredT0);\n  const intersectionPoints = findSignalIntersectionsAtZero(t, tenz, interfCorrected);\n\n  return {\n    t,\n    tenz,\n    interf,\n    interfCorrected,\n    t0: filteredT0,\n    y0: filteredY0,\n    u_interf,\n    dudt_interf,\n    intersectionPoints,\n  };\n};\n\nconst findZeroCrossings = (t, interf, eps = 1e-6) => {\n  const t0 = [];\n  const y0 = [];\n\n  for (let i = 1; i < interf.length; i++) {\n    const y1 = interf[i - 1];\n    const y2 = interf[i];\n    const x1 = t[i - 1];\n    const x2 = t[i];\n\n    if (Math.abs(y1) < eps) {\n      t0.push(x1);\n      y0.push(0);\n      continue;\n    }\n    if (Math.abs(y2) < eps) {\n      t0.push(x2);\n      y0.push(0);\n      continue;\n    }\n\n    if (Math.abs(y1) < eps && Math.abs(y2) < eps) {\n      t0.push((x1 + x2) / 2);\n      y0.push(0);\n      continue;\n    }\n\n    if (y1 * y2 < 0) {\n      const t_zero = x1 - y1 * (x2 - x1) / (y2 - y1);\n      t0.push(t_zero);\n      y0.push(0);\n    }\n  }\n\n  return { t0, y0 };\n};\n\nconst filterClosePoints = (t0, y0, minDistance) => {\n  if (t0.length <= 1) {\n    return { filteredT0: t0, filteredY0: y0 };\n  }\n\n  let filteredT0 = [...t0];\n  let filteredY0 = [...y0];\n\n  for (let k = 0; k < 10; k++) {\n    const newT0 = [filteredT0[0]];\n    const newY0 = [filteredY0[0]];\n\n    for (let i = 1; i < filteredT0.length; i++) {\n      if (filteredT0[i] - newT0[newT0.length - 1] >= minDistance) {\n        newT0.push(filteredT0[i]);\n        newY0.push(filteredY0[i]);\n      }\n    }\n\n    if (newT0.length === filteredT0.length) break;\n\n    filteredT0 = newT0;\n    filteredY0 = newY0;\n  }\n\n  return { filteredT0, filteredY0 };\n};\n\nconst calculateDerivative = (t0) => {\n  const u_interf = [];\n  const dudt_interf = [];\n\n  for (let i = 0; i < t0.length; i++) {\n    if (i === 0) {\n      u_interf[i] = (0.63 / 4) * 1e-6;\n      dudt_interf[i] = 0;\n    } else {\n      u_interf[i] = u_interf[i - 1] + (0.63 / 4) * 1e-6;\n      const du_interf = u_interf[i] - u_interf[i - 1];\n      const dt_interf = t0[i] - t0[i - 1];\n      dudt_interf[i] = dt_interf !== 0 ? du_interf / dt_interf : 0;\n    }\n  }\n\n  return { u_interf, dudt_interf };\n};\n\nconst findSignalIntersectionsAtZero = (\n  t,\n  tenz,\n  interf,\n  yThreshold = 0.02\n) => {\n  const intersections = [];\n\n  for (let i = 1; i < t.length; i++) {\n    const diffPrev = tenz[i - 1] - interf[i - 1];\n    const diffCurr = tenz[i] - interf[i];\n\n    if ((diffPrev <= 0 && diffCurr > 0) || (diffPrev >= 0 && diffCurr < 0)) {\n      const t1 = t[i - 1];\n      const t2 = t[i];\n      const diffDelta = diffCurr - diffPrev;\n\n      if (diffDelta === 0) continue;\n\n      const ratio = -diffPrev / diffDelta;\n      const time = t1 + ratio * (t2 - t1);\n\n      const tenzValue = tenz[i - 1] + ratio * (tenz[i] - tenz[i - 1]);\n      const interfValue = interf[i - 1] + ratio * (interf[i] - interf[i - 1]);\n\n      const value = (tenzValue + interfValue) / 2;\n\n      if (Math.abs(value) <= yThreshold) {\n        intersections.push({ time, value });\n      }\n    }\n  }\n\n  return intersections;\n};\n\nexport const generateChartData = (results) => {\n  const { t, tenz, interfCorrected, t0, dudt_interf, intersectionPoints } = results;\n\n  const step = Math.max(1, Math.floor(t.length / 2000));\n\n  const limitedT = [];\n  const limitedTenz = [];\n  const limitedInterf = [];\n\n  for (let i = 0; i < t.length; i += step) {\n    limitedT.push(t[i]);\n    limitedTenz.push(tenz[i]);\n    limitedInterf.push(interfCorrected[i]);\n  }\n\n  const chartData = {\n    original: [\n      {\n        label: \"Тензометрический сигнал (CH1)\",\n        data: limitedT.map((time, idx) => ({ x: time, y: limitedTenz[idx] })),\n        borderColor: \"rgb(255, 99, 132)\",\n        backgroundColor: \"rgba(255, 99, 132, 0.1)\",\n        borderWidth: 1,\n        tension: 0.1,\n      },\n      {\n        label: \"Интерферометрический сигнал (CH3, центрированный)\",\n        data: limitedT.map((time, idx) => ({ x: time, y: limitedInterf[idx] })),\n        borderColor: \"rgb(54, 162, 235)\",\n        backgroundColor: \"rgba(54, 162, 235, 0.1)\",\n        borderWidth: 1,\n        tension: 0.1,\n      },\n    ],\n    processed: [\n      {\n        label: \"Производная интерферометрического сигнала\",\n        data: t0.map((time, idx) => ({\n          x: time - 51.5e-6,\n          y: dudt_interf[idx],\n        })),\n        borderColor: \"rgb(75, 192, 192)\",\n        backgroundColor: \"rgba(75, 192, 192, 0.1)\",\n        borderWidth: 2,\n        pointRadius: 2,\n        showLine: true,\n      },\n      {\n        label: \"Скорректированный тензосигнал\",\n        data: limitedT.map((time, idx) => ({\n          x: time + 50e-6,\n          y: -limitedTenz[idx] * 5000 + 0.38,\n        })),\n        borderColor: \"rgb(153, 102, 255)\",\n        backgroundColor: \"rgba(153, 102, 255, 0.1)\",\n        borderWidth: 1,\n        tension: 0.1,\n      },\n    ],\n  };\n\n  if (intersectionPoints.length) {\n    chartData.original.push({\n      label: \"Пересечения при Y=0\",\n      data: intersectionPoints.map(({ time, value }) => ({\n        x: time,\n        y: value,\n      })),\n      showLine: false,\n      pointStyle: \"crossRot\",\n      pointRadius: 0,\n      pointHoverRadius: 0,\n      borderWidth: 0,\n      order: 99,\n      z: 50,\n      intersectionMarker: true,\n      markerSize: 4,\n      markerColor: \"#000000\",\n      markerAlpha: 0.7,\n      markerLineWidth: 2,\n    });\n  }\n\n  chartData.intersections = intersectionPoints;\n\n  chartData.rawData = {\n    t: limitedT,\n    tenz: limitedTenz,\n    interf: limitedInterf,\n    fullT: t,\n    fullTenz: tenz,\n    fullInterf: interfCorrected,\n    t0,\n    dudt_interf,\n  };\n\n  return chartData;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}