{"ast":null,"code":"// -------------------- Полный обработчик CSV и графиков --------------------\n\nexport const processCSVData = file => {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = e => {\n      try {\n        const csvText = e.target.result;\n        const results = parseCSV(csvText);\n        resolve(results);\n      } catch (error) {\n        reject(error);\n      }\n    };\n    reader.onerror = () => reject(new Error(\"Ошибка чтения файла\"));\n    reader.readAsText(file);\n  });\n};\n\n// -------------------- Матрицы --------------------\nconst transpose = M => M[0].map((_, i) => M.map(row => row[i]));\nconst multiplyMatrices = (A, B) => {\n  const aRows = A.length,\n    aCols = A[0].length,\n    bCols = B[0].length;\n  const C = Array.from({\n    length: aRows\n  }, () => Array(bCols).fill(0));\n  for (let i = 0; i < aRows; i++) {\n    for (let k = 0; k < aCols; k++) {\n      const v = A[i][k];\n      for (let j = 0; j < bCols; j++) C[i][j] += v * B[k][j];\n    }\n  }\n  return C;\n};\nconst invertMatrix = m => {\n  const n = m.length;\n  const A = m.map((row, i) => row.concat(Array.from({\n    length: n\n  }, (_, j) => i === j ? 1 : 0)));\n  for (let i = 0; i < n; i++) {\n    let maxRow = i;\n    for (let k = i + 1; k < n; k++) if (Math.abs(A[k][i]) > Math.abs(A[maxRow][i])) maxRow = k;\n    if (Math.abs(A[maxRow][i]) < 1e-15) throw new Error(\"Матрица вырождена, невозможно инвертировать\");\n    if (maxRow !== i) {\n      const tmp = A[i];\n      A[i] = A[maxRow];\n      A[maxRow] = tmp;\n    }\n    const diag = A[i][i];\n    for (let j = 0; j < 2 * n; j++) A[i][j] /= diag;\n    for (let k = 0; k < n; k++) {\n      if (k === i) continue;\n      const factor = A[k][i];\n      if (factor === 0) continue;\n      for (let j = 0; j < 2 * n; j++) A[k][j] -= factor * A[i][j];\n    }\n  }\n  return A.map(row => row.slice(n));\n};\n\n// -------------------- Savitzky–Golay --------------------\nconst savitzkyGolay = (data, windowSize = 31, polyOrder = 3) => {\n  if (!Array.isArray(data) || data.length === 0) return [];\n  windowSize = Math.max(3, Math.floor(windowSize));\n  if (windowSize % 2 === 0) windowSize += 1;\n  polyOrder = Math.max(1, Math.floor(polyOrder));\n  if (polyOrder >= windowSize) polyOrder = windowSize - 1;\n  const n = data.length;\n  if (n <= windowSize) {\n    const out = new Array(n).fill(0);\n    const half = Math.floor(windowSize / 2);\n    for (let i = 0; i < n; i++) {\n      let sum = 0,\n        cnt = 0;\n      for (let j = i - half; j <= i + half; j++) {\n        const idx = Math.min(n - 1, Math.max(0, j));\n        sum += data[idx];\n        cnt++;\n      }\n      out[i] = sum / cnt;\n    }\n    return out;\n  }\n  const half = Math.floor(windowSize / 2);\n  const A = [];\n  for (let i = -half; i <= half; i++) {\n    const row = [];\n    for (let p = 0; p <= polyOrder; p++) row.push(Math.pow(i, p));\n    A.push(row);\n  }\n  const AT = transpose(A);\n  const ATA = multiplyMatrices(AT, A);\n  let invATA;\n  try {\n    invATA = invertMatrix(ATA);\n  } catch {\n    return data.slice();\n  }\n  const ATAinvAT = multiplyMatrices(invATA, AT);\n  const coeffs = ATAinvAT[0];\n  const out = new Array(n).fill(0);\n  for (let i = 0; i < n; i++) {\n    let acc = 0;\n    for (let j = -half; j <= half; j++) {\n      let idx = i + j;\n      if (idx < 0) idx = 0;\n      if (idx >= n) idx = n - 1;\n      acc += data[idx] * coeffs[j + half];\n    }\n    out[i] = acc;\n  }\n  return out;\n};\n\n// -------------------- Baseline --------------------\nconst removeBaseline = (arr, N = 2000) => {\n  if (!Array.isArray(arr) || arr.length === 0) return [];\n  const count = Math.min(arr.length, N);\n  const avg = arr.slice(0, count).reduce((s, v) => s + v, 0) / count;\n  return arr.map(v => v - avg);\n};\n\n// -------------------- Автоподбор SG --------------------\nconst autoSGParams = signalLength => {\n  let window = Math.floor(signalLength * 0.02);\n  if (window % 2 === 0) window += 1;\n  window = Math.max(5, window);\n  const poly = Math.min(4, Math.floor(window / 4) || 2);\n  return {\n    window,\n    poly\n  };\n};\nconst calculateDerivativeSG = (t, signal, window, poly) => {\n  const smoothed = savitzkyGolay(signal, window, poly);\n  const deriv = new Array(signal.length).fill(0);\n  for (let i = 1; i < signal.length; i++) deriv[i] = (smoothed[i] - smoothed[i - 1]) / (t[i] - t[i - 1]);\n  deriv[0] = deriv[1];\n  return deriv;\n};\nconst calculateDerivativeSGAuto = (t, signal) => {\n  const {\n    window,\n    poly\n  } = autoSGParams(signal.length);\n  return calculateDerivativeSG(t, signal, window, poly);\n};\n\n// -------------------- Нулевые пересечения --------------------\nconst findZeroCrossings = (t, y, eps = 1e-6) => {\n  const t0 = [],\n    y0 = [];\n  if (!t || !y) return {\n    t0,\n    y0\n  };\n  for (let i = 1; i < y.length; i++) {\n    const y1 = y[i - 1],\n      y2 = y[i],\n      x1 = t[i - 1],\n      x2 = t[i];\n    if (Math.abs(y1) < eps) {\n      t0.push(x1);\n      y0.push(0);\n      continue;\n    }\n    if (Math.abs(y2) < eps) {\n      t0.push(x2);\n      y0.push(0);\n      continue;\n    }\n    if (y1 * y2 < 0) {\n      const tZero = x1 - y1 * (x2 - x1) / (y2 - y1);\n      t0.push(tZero);\n      y0.push(0);\n    }\n  }\n  return {\n    t0,\n    y0\n  };\n};\n\n// -------------------- Фильтрация близких точек --------------------\nconst filterClosePoints = (t0, y0, minDist) => {\n  if (!Array.isArray(t0) || t0.length <= 1) return {\n    filteredT0: t0 || [],\n    filteredY0: y0 || []\n  };\n  let filteredT0 = [t0[0]],\n    filteredY0 = [y0[0]];\n  for (let i = 1; i < t0.length; i++) if (t0[i] - filteredT0[filteredT0.length - 1] >= minDist) {\n    filteredT0.push(t0[i]);\n    filteredY0.push(y0[i]);\n  }\n  return {\n    filteredT0,\n    filteredY0\n  };\n};\n\n// -------------------- Пересечения сигналов --------------------\nconst findSignalIntersectionsAtZero = (t, tenz, interf, yThreshold = 0.02) => {\n  const intersections = [];\n  for (let i = 1; i < t.length; i++) {\n    const diffPrev = tenz[i - 1] - interf[i - 1],\n      diffCurr = tenz[i] - interf[i];\n    if (diffPrev <= 0 && diffCurr > 0 || diffPrev >= 0 && diffCurr < 0) {\n      const t1 = t[i - 1],\n        t2 = t[i],\n        diffDelta = diffCurr - diffPrev;\n      if (diffDelta === 0) continue;\n      const ratio = -diffPrev / diffDelta;\n      const time = t1 + ratio * (t2 - t1);\n      const tenzVal = tenz[i - 1] + ratio * (tenz[i] - tenz[i - 1]);\n      const interfVal = interf[i - 1] + ratio * (interf[i] - interf[i - 1]);\n      const value = (tenzVal + interfVal) / 2;\n      if (Math.abs(value) <= yThreshold) intersections.push({\n        time,\n        value\n      });\n    }\n  }\n  return intersections;\n};\n\n// -------------------- Парсинг CSV --------------------\nconst parseCSV = (csvText, options = {}) => {\n  const baselineN = options.baselineN || 2000;\n  const skipStart = options.skipStart || 6650;\n  const skipEnd = options.skipEnd || 27000;\n  const lines = csvText.split(\"\\n\");\n  const t = [],\n    tenz = [],\n    interf = [];\n  let dataStarted = false,\n    lineCount = 0;\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i].trim();\n    if (!line) continue;\n    if (line.startsWith(\"TIME,CH1,\")) {\n      dataStarted = true;\n      continue;\n    }\n    if (!dataStarted) continue;\n    lineCount++;\n    if (lineCount < skipStart) continue;\n    if (lineCount > skipEnd) break;\n    const f = line.split(\",\");\n    if (f.length >= 5) {\n      const time = parseFloat(f[0]),\n        ch1 = parseFloat(f[1]),\n        ch3 = parseFloat(f[3]);\n      if (!isNaN(time) && !isNaN(ch1) && !isNaN(ch3)) {\n        t.push(time);\n        tenz.push(ch1 * 0.00132 * 1.25);\n        interf.push(ch3 + 0.04);\n      }\n    }\n  }\n  const {\n    window,\n    poly\n  } = autoSGParams(interf.length);\n  const interfSmoothed = savitzkyGolay(interf, window, poly);\n  const interfCorrected = removeBaseline(interfSmoothed, baselineN);\n  const {\n    t0,\n    y0\n  } = findZeroCrossings(t, interfCorrected);\n  const {\n    filteredT0,\n    filteredY0\n  } = filterClosePoints(t0, y0, 100e-9);\n  const dudt_interf = calculateDerivativeSGAuto(t, interfCorrected);\n  const intersectionPoints = findSignalIntersectionsAtZero(t, tenz, interfCorrected);\n  return {\n    t,\n    tenz,\n    interf,\n    interfSmoothed,\n    interfCorrected,\n    t0: filteredT0,\n    y0: filteredY0,\n    dudt_interf,\n    intersectionPoints\n  };\n};\n\n// -------------------- Подготовка графиков --------------------\nexport const generateChartData = results => {\n  const {\n    t,\n    tenz,\n    interfSmoothed,\n    interfCorrected,\n    dudt_interf,\n    intersectionPoints\n  } = results;\n  const step = Math.max(1, Math.floor(t.length / 2000));\n  const limitedT = [],\n    limitedTenz = [],\n    limitedInterf = [],\n    limitedInterfSmoothed = [];\n  for (let i = 0; i < t.length; i += step) {\n    limitedT.push(t[i]);\n    limitedTenz.push(tenz[i]);\n    limitedInterf.push(interfCorrected[i]);\n    limitedInterfSmoothed.push(interfSmoothed[i]);\n  }\n  const chartData = {\n    original: [{\n      label: \"Тензометрический сигнал (CH1)\",\n      data: limitedT.map((time, idx) => ({\n        x: time,\n        y: limitedTenz[idx]\n      })),\n      borderColor: \"rgb(255,99,132)\",\n      backgroundColor: \"rgba(255,99,132,0.1)\",\n      borderWidth: 1,\n      tension: 0.1\n    }, {\n      label: \"Интерферометрический сигнал (CH3, сглаженный)\",\n      data: limitedT.map((time, idx) => ({\n        x: time,\n        y: limitedInterfSmoothed[idx]\n      })),\n      borderColor: \"rgb(0,0,0)\",\n      backgroundColor: \"rgba(0,0,0,0.05)\",\n      borderWidth: 1,\n      tension: 0.1\n    }, {\n      label: \"Интерферометрический сигнал (CH3, центрированный)\",\n      data: limitedT.map((time, idx) => ({\n        x: time,\n        y: limitedInterf[idx]\n      })),\n      borderColor: \"rgb(54,162,235)\",\n      backgroundColor: \"rgba(54,162,235,0.1)\",\n      borderWidth: 1,\n      tension: 0.1\n    }],\n    processed: [{\n      label: \"Производная интерферометрического сигнала\",\n      data: limitedT.map((time, idx) => ({\n        x: time,\n        y: dudt_interf[idx]\n      })),\n      borderColor: \"rgb(75,192,192)\",\n      backgroundColor: \"rgba(75,192,192,0.1)\",\n      borderWidth: 2,\n      pointRadius: 2,\n      showLine: true\n    }, {\n      label: \"Скорректированный тензосигнал\",\n      data: limitedT.map((time, idx) => ({\n        x: time,\n        y: -limitedTenz[idx] * 5000 + 0.38\n      })),\n      borderColor: \"rgb(153,102,255)\",\n      backgroundColor: \"rgba(153,102,255,0.1)\",\n      borderWidth: 1,\n      tension: 0.1\n    }]\n  };\n  if (intersectionPoints && intersectionPoints.length) {\n    chartData.original.push({\n      label: \"Пересечения при Y=0\",\n      data: intersectionPoints.map(({\n        time,\n        value\n      }) => ({\n        x: time,\n        y: value\n      })),\n      showLine: false,\n      pointStyle: \"crossRot\",\n      pointRadius: 3,\n      pointHoverRadius: 4,\n      borderWidth: 0,\n      order: 99,\n      z: 50,\n      intersectionMarker: true,\n      markerSize: 4,\n      markerColor: \"#000\",\n      markerAlpha: 0.7,\n      markerLineWidth: 2\n    });\n  }\n  chartData.intersections = intersectionPoints || [];\n  chartData.rawData = {\n    t: limitedT,\n    tenz: limitedTenz,\n    interf: limitedInterf,\n    fullT: t,\n    fullTenz: tenz,\n    fullInterf: interfCorrected,\n    dudt_interf\n  };\n  return chartData;\n};","map":{"version":3,"names":["processCSVData","file","Promise","resolve","reject","reader","FileReader","onload","e","csvText","target","result","results","parseCSV","error","onerror","Error","readAsText","transpose","M","map","_","i","row","multiplyMatrices","A","B","aRows","length","aCols","bCols","C","Array","from","fill","k","v","j","invertMatrix","m","n","concat","maxRow","Math","abs","tmp","diag","factor","slice","savitzkyGolay","data","windowSize","polyOrder","isArray","max","floor","out","half","sum","cnt","idx","min","p","push","pow","AT","ATA","invATA","ATAinvAT","coeffs","acc","removeBaseline","arr","N","count","avg","reduce","s","autoSGParams","signalLength","window","poly","calculateDerivativeSG","t","signal","smoothed","deriv","calculateDerivativeSGAuto","findZeroCrossings","y","eps","t0","y0","y1","y2","x1","x2","tZero","filterClosePoints","minDist","filteredT0","filteredY0","findSignalIntersectionsAtZero","tenz","interf","yThreshold","intersections","diffPrev","diffCurr","t1","t2","diffDelta","ratio","time","tenzVal","interfVal","value","options","baselineN","skipStart","skipEnd","lines","split","dataStarted","lineCount","line","trim","startsWith","f","parseFloat","ch1","ch3","isNaN","interfSmoothed","interfCorrected","dudt_interf","intersectionPoints","generateChartData","step","limitedT","limitedTenz","limitedInterf","limitedInterfSmoothed","chartData","original","label","x","borderColor","backgroundColor","borderWidth","tension","processed","pointRadius","showLine","pointStyle","pointHoverRadius","order","z","intersectionMarker","markerSize","markerColor","markerAlpha","markerLineWidth","rawData","fullT","fullTenz","fullInterf"],"sources":["C:/Users/Иван/Desktop/signal-analyzer/src/csvProcessor.js"],"sourcesContent":["// -------------------- Полный обработчик CSV и графиков --------------------\n\nexport const processCSVData = (file) => {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      try {\n        const csvText = e.target.result;\n        const results = parseCSV(csvText);\n        resolve(results);\n      } catch (error) {\n        reject(error);\n      }\n    };\n    reader.onerror = () => reject(new Error(\"Ошибка чтения файла\"));\n    reader.readAsText(file);\n  });\n};\n\n// -------------------- Матрицы --------------------\nconst transpose = (M) => M[0].map((_, i) => M.map(row => row[i]));\n\nconst multiplyMatrices = (A, B) => {\n  const aRows = A.length, aCols = A[0].length, bCols = B[0].length;\n  const C = Array.from({ length: aRows }, () => Array(bCols).fill(0));\n  for (let i = 0; i < aRows; i++) {\n    for (let k = 0; k < aCols; k++) {\n      const v = A[i][k];\n      for (let j = 0; j < bCols; j++) C[i][j] += v * B[k][j];\n    }\n  }\n  return C;\n};\n\nconst invertMatrix = (m) => {\n  const n = m.length;\n  const A = m.map((row, i) => row.concat(\n    Array.from({ length: n }, (_, j) => (i === j ? 1 : 0))\n  ));\n  for (let i = 0; i < n; i++) {\n    let maxRow = i;\n    for (let k = i + 1; k < n; k++) if (Math.abs(A[k][i]) > Math.abs(A[maxRow][i])) maxRow = k;\n    if (Math.abs(A[maxRow][i]) < 1e-15) throw new Error(\"Матрица вырождена, невозможно инвертировать\");\n    if (maxRow !== i) { const tmp = A[i]; A[i] = A[maxRow]; A[maxRow] = tmp; }\n    const diag = A[i][i];\n    for (let j = 0; j < 2 * n; j++) A[i][j] /= diag;\n    for (let k = 0; k < n; k++) {\n      if (k === i) continue;\n      const factor = A[k][i];\n      if (factor === 0) continue;\n      for (let j = 0; j < 2 * n; j++) A[k][j] -= factor * A[i][j];\n    }\n  }\n  return A.map(row => row.slice(n));\n};\n\n// -------------------- Savitzky–Golay --------------------\nconst savitzkyGolay = (data, windowSize = 31, polyOrder = 3) => {\n  if (!Array.isArray(data) || data.length === 0) return [];\n  windowSize = Math.max(3, Math.floor(windowSize));\n  if (windowSize % 2 === 0) windowSize += 1;\n  polyOrder = Math.max(1, Math.floor(polyOrder));\n  if (polyOrder >= windowSize) polyOrder = windowSize - 1;\n\n  const n = data.length;\n  if (n <= windowSize) {\n    const out = new Array(n).fill(0);\n    const half = Math.floor(windowSize / 2);\n    for (let i = 0; i < n; i++) {\n      let sum = 0, cnt = 0;\n      for (let j = i - half; j <= i + half; j++) { const idx = Math.min(n-1, Math.max(0,j)); sum += data[idx]; cnt++; }\n      out[i] = sum / cnt;\n    }\n    return out;\n  }\n\n  const half = Math.floor(windowSize / 2);\n  const A = [];\n  for (let i = -half; i <= half; i++) {\n    const row = [];\n    for (let p = 0; p <= polyOrder; p++) row.push(Math.pow(i,p));\n    A.push(row);\n  }\n\n  const AT = transpose(A);\n  const ATA = multiplyMatrices(AT, A);\n  let invATA;\n  try { invATA = invertMatrix(ATA); } catch { return data.slice(); }\n  const ATAinvAT = multiplyMatrices(invATA, AT);\n  const coeffs = ATAinvAT[0];\n\n  const out = new Array(n).fill(0);\n  for (let i = 0; i < n; i++) {\n    let acc = 0;\n    for (let j = -half; j <= half; j++) {\n      let idx = i + j; if (idx < 0) idx=0; if (idx>=n) idx=n-1;\n      acc += data[idx] * coeffs[j+half];\n    }\n    out[i] = acc;\n  }\n  return out;\n};\n\n// -------------------- Baseline --------------------\nconst removeBaseline = (arr, N=2000) => {\n  if (!Array.isArray(arr) || arr.length === 0) return [];\n  const count = Math.min(arr.length, N);\n  const avg = arr.slice(0,count).reduce((s,v)=>s+v,0)/count;\n  return arr.map(v => v-avg);\n};\n\n// -------------------- Автоподбор SG --------------------\nconst autoSGParams = (signalLength) => {\n  let window = Math.floor(signalLength*0.02);\n  if (window%2===0) window+=1;\n  window = Math.max(5, window);\n  const poly = Math.min(4, Math.floor(window/4)||2);\n  return { window, poly };\n};\n\nconst calculateDerivativeSG = (t, signal, window, poly) => {\n  const smoothed = savitzkyGolay(signal, window, poly);\n  const deriv = new Array(signal.length).fill(0);\n  for (let i=1; i<signal.length; i++) deriv[i] = (smoothed[i]-smoothed[i-1])/(t[i]-t[i-1]);\n  deriv[0] = deriv[1];\n  return deriv;\n};\n\nconst calculateDerivativeSGAuto = (t, signal) => {\n  const { window, poly } = autoSGParams(signal.length);\n  return calculateDerivativeSG(t, signal, window, poly);\n};\n\n// -------------------- Нулевые пересечения --------------------\nconst findZeroCrossings = (t, y, eps=1e-6) => {\n  const t0=[], y0=[];\n  if (!t||!y) return { t0, y0 };\n  for (let i=1; i<y.length; i++) {\n    const y1=y[i-1], y2=y[i], x1=t[i-1], x2=t[i];\n    if (Math.abs(y1)<eps) { t0.push(x1); y0.push(0); continue; }\n    if (Math.abs(y2)<eps) { t0.push(x2); y0.push(0); continue; }\n    if (y1*y2<0) { const tZero=x1-y1*(x2-x1)/(y2-y1); t0.push(tZero); y0.push(0); }\n  }\n  return { t0, y0 };\n};\n\n// -------------------- Фильтрация близких точек --------------------\nconst filterClosePoints = (t0, y0, minDist) => {\n  if (!Array.isArray(t0)||t0.length<=1) return { filteredT0: t0||[], filteredY0: y0||[] };\n  let filteredT0=[t0[0]], filteredY0=[y0[0]];\n  for (let i=1;i<t0.length;i++) if(t0[i]-filteredT0[filteredT0.length-1]>=minDist){ filteredT0.push(t0[i]); filteredY0.push(y0[i]); }\n  return { filteredT0, filteredY0 };\n};\n\n// -------------------- Пересечения сигналов --------------------\nconst findSignalIntersectionsAtZero = (t, tenz, interf, yThreshold=0.02)=>{\n  const intersections=[];\n  for(let i=1;i<t.length;i++){\n    const diffPrev=tenz[i-1]-interf[i-1], diffCurr=tenz[i]-interf[i];\n    if((diffPrev<=0&&diffCurr>0)||(diffPrev>=0&&diffCurr<0)){\n      const t1=t[i-1], t2=t[i], diffDelta=diffCurr-diffPrev;\n      if(diffDelta===0) continue;\n      const ratio=-diffPrev/diffDelta;\n      const time=t1+ratio*(t2-t1);\n      const tenzVal=tenz[i-1]+ratio*(tenz[i]-tenz[i-1]);\n      const interfVal=interf[i-1]+ratio*(interf[i]-interf[i-1]);\n      const value=(tenzVal+interfVal)/2;\n      if(Math.abs(value)<=yThreshold) intersections.push({time,value});\n    }\n  }\n  return intersections;\n};\n\n// -------------------- Парсинг CSV --------------------\nconst parseCSV = (csvText, options={})=>{\n  const baselineN = options.baselineN||2000;\n  const skipStart = options.skipStart||6650;\n  const skipEnd = options.skipEnd||27000;\n\n  const lines=csvText.split(\"\\n\");\n  const t=[], tenz=[], interf=[];\n  let dataStarted=false, lineCount=0;\n\n  for(let i=0;i<lines.length;i++){\n    const line=lines[i].trim();\n    if(!line) continue;\n    if(line.startsWith(\"TIME,CH1,\")){ dataStarted=true; continue; }\n    if(!dataStarted) continue;\n\n    lineCount++;\n    if(lineCount<skipStart) continue;\n    if(lineCount>skipEnd) break;\n\n    const f=line.split(\",\");\n    if(f.length>=5){\n      const time=parseFloat(f[0]), ch1=parseFloat(f[1]), ch3=parseFloat(f[3]);\n      if(!isNaN(time)&&!isNaN(ch1)&&!isNaN(ch3)){ t.push(time); tenz.push(ch1*0.00132*1.25); interf.push(ch3+0.04); }\n    }\n  }\n\n  const { window, poly } = autoSGParams(interf.length);\n  const interfSmoothed = savitzkyGolay(interf, window, poly);\n  const interfCorrected = removeBaseline(interfSmoothed, baselineN);\n\n  const { t0, y0 } = findZeroCrossings(t, interfCorrected);\n  const { filteredT0, filteredY0 } = filterClosePoints(t0, y0, 100e-9);\n\n  const dudt_interf = calculateDerivativeSGAuto(t, interfCorrected);\n\n  const intersectionPoints = findSignalIntersectionsAtZero(t, tenz, interfCorrected);\n\n  return { t, tenz, interf, interfSmoothed, interfCorrected, t0: filteredT0, y0: filteredY0, dudt_interf, intersectionPoints };\n};\n\n// -------------------- Подготовка графиков --------------------\nexport const generateChartData = (results)=>{\n  const { t, tenz, interfSmoothed, interfCorrected, dudt_interf, intersectionPoints }=results;\n  const step = Math.max(1, Math.floor(t.length/2000));\n  const limitedT=[], limitedTenz=[], limitedInterf=[], limitedInterfSmoothed=[];\n  for(let i=0;i<t.length;i+=step){ limitedT.push(t[i]); limitedTenz.push(tenz[i]); limitedInterf.push(interfCorrected[i]); limitedInterfSmoothed.push(interfSmoothed[i]); }\n\n  const chartData = {\n    original:[\n      { label:\"Тензометрический сигнал (CH1)\", data:limitedT.map((time,idx)=>({x:time,y:limitedTenz[idx]})), borderColor:\"rgb(255,99,132)\", backgroundColor:\"rgba(255,99,132,0.1)\", borderWidth:1, tension:0.1 },\n      { label:\"Интерферометрический сигнал (CH3, сглаженный)\", data:limitedT.map((time,idx)=>({x:time,y:limitedInterfSmoothed[idx]})), borderColor:\"rgb(0,0,0)\", backgroundColor:\"rgba(0,0,0,0.05)\", borderWidth:1, tension:0.1 },\n      { label:\"Интерферометрический сигнал (CH3, центрированный)\", data:limitedT.map((time,idx)=>({x:time,y:limitedInterf[idx]})), borderColor:\"rgb(54,162,235)\", backgroundColor:\"rgba(54,162,235,0.1)\", borderWidth:1, tension:0.1 },\n    ],\n    processed:[\n      { label:\"Производная интерферометрического сигнала\", data:limitedT.map((time,idx)=>({x:time, y:dudt_interf[idx]})), borderColor:\"rgb(75,192,192)\", backgroundColor:\"rgba(75,192,192,0.1)\", borderWidth:2, pointRadius:2, showLine:true },\n      { label:\"Скорректированный тензосигнал\", data:limitedT.map((time,idx)=>({x:time,y:-limitedTenz[idx]*5000+0.38})), borderColor:\"rgb(153,102,255)\", backgroundColor:\"rgba(153,102,255,0.1)\", borderWidth:1, tension:0.1 },\n    ]\n  };\n\n  if(intersectionPoints && intersectionPoints.length){\n    chartData.original.push({ label:\"Пересечения при Y=0\", data:intersectionPoints.map(({time,value})=>({x:time,y:value})), showLine:false, pointStyle:\"crossRot\", pointRadius:3, pointHoverRadius:4, borderWidth:0, order:99, z:50, intersectionMarker:true, markerSize:4, markerColor:\"#000\", markerAlpha:0.7, markerLineWidth:2 });\n  }\n\n  chartData.intersections = intersectionPoints || [];\n  chartData.rawData = { t: limitedT, tenz: limitedTenz, interf: limitedInterf, fullT: t, fullTenz:tenz, fullInterf:interfCorrected, dudt_interf };\n  return chartData;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}